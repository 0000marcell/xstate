(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{153:function(e,a,n){"use strict";n.r(a),n.d(a,"_frontmatter",function(){return p});var t=n(167),s=n.n(t),c=n(0),m=n.n(c),l=n(168),o=n(169);a.default=function(e){var a=e.components,n=s()(e,["components"]);return m.a.createElement(l.MDXTag,{name:"wrapper",Layout:o.a,layoutProps:n,components:a},m.a.createElement(l.MDXTag,{name:"h1",components:a,props:{id:"hierarchical-state-machines"}},m.a.createElement(l.MDXTag,{name:"a",components:a,parentName:"h1",props:{href:"#hierarchical-state-machines","aria-hidden":!0,class:"anchor"}}),"Hierarchical State Machines"),m.a.createElement(l.MDXTag,{name:"p",components:a},"Statecharts, by definition, are hierarchical - that is to say, they:"),m.a.createElement(l.MDXTag,{name:"ul",components:a},m.a.createElement(l.MDXTag,{name:"li",components:a,parentName:"ul"},"enable refinement of state"),m.a.createElement(l.MDXTag,{name:"li",components:a,parentName:"ul"},"can group similar transitions"),m.a.createElement(l.MDXTag,{name:"li",components:a,parentName:"ul"},"allow isolation"),m.a.createElement(l.MDXTag,{name:"li",components:a,parentName:"ul"},"encourage composability"),m.a.createElement(l.MDXTag,{name:"li",components:a,parentName:"ul"},"and prevent state explosion, which frequently occurs in normal finite state machines.")),m.a.createElement(l.MDXTag,{name:"p",components:a},"In XState, state and machine configuration share a common schema, which allows machines to be ",m.a.createElement(l.MDXTag,{name:"em",components:a,parentName:"p"},"substates")," and for states to be infinitely nested."),m.a.createElement(l.MDXTag,{name:"p",components:a},"Here's an example of a traffic light machine with nested states:"),m.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},m.a.createElement("pre",{className:"language-js"},m.a.createElement("code",{className:"language-js"},m.a.createElement("span",{className:"token keyword"},"const")," pedestrianStates ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'walk'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","walk",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token constant"},"PED_COUNTDOWN"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'wait'"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","wait",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token constant"},"PED_COUNTDOWN"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'stop'"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","stop",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," lightMachine ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"Machine"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","key",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'light'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'green'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","green",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token constant"},"TIMER"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'yellow'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","        ",m.a.createElement("span",{className:"token constant"},"POWER_OUTAGE"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'red'"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","yellow",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token constant"},"TIMER"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'red'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","        ",m.a.createElement("span",{className:"token constant"},"POWER_OUTAGE"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'red'"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","red",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token constant"},"TIMER"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'green'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","        ",m.a.createElement("span",{className:"token constant"},"POWER_OUTAGE"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'red'"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","      ",m.a.createElement("span",{className:"token operator"},"..."),"pedestrianStates","\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";")))),m.a.createElement(l.MDXTag,{name:"p",components:a},"The ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'green'")," and ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'yellow'")," states are ",m.a.createElement(l.MDXTag,{name:"strong",components:a,parentName:"p"},"simple states")," - they have no child states. In contrast, the ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'red'")," state is a ",m.a.createElement(l.MDXTag,{name:"strong",components:a,parentName:"p"},"composite state")," since it is composed of ",m.a.createElement(l.MDXTag,{name:"strong",components:a,parentName:"p"},"substates")," (the ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"pedestrianStates"),")."),m.a.createElement(l.MDXTag,{name:"p",components:a},"To transition from an initial state, use ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"machine.initialState"),":"),m.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},m.a.createElement("pre",{className:"language-js"},m.a.createElement("code",{className:"language-js"},"console",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"log"),m.a.createElement("span",{className:"token punctuation"},"("),"lightMachine",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"transition"),m.a.createElement("span",{className:"token punctuation"},"("),"lightMachine",m.a.createElement("span",{className:"token punctuation"},"."),"initialState",m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token string"},"'TIMER'"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},"."),"value",m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n",m.a.createElement("span",{className:"token comment"},"// => 'yellow'")))),m.a.createElement(l.MDXTag,{name:"p",components:a},"When a composite state is entered, its initial state is immediately entered as well. In the following example:"),m.a.createElement(l.MDXTag,{name:"ul",components:a},m.a.createElement(l.MDXTag,{name:"li",components:a,parentName:"ul"},"the ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"'red'")," state is entered"),m.a.createElement(l.MDXTag,{name:"li",components:a,parentName:"ul"},"since ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"'red'")," has an initial state of ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"'walk'"),", the ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"{ red: 'walk' }")," state is ultimately entered.")),m.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},m.a.createElement("pre",{className:"language-js"},m.a.createElement("code",{className:"language-js"},"console",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"log"),m.a.createElement("span",{className:"token punctuation"},"("),"lightMachine",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"transition"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'yellow'"),m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token string"},"'TIMER'"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},"."),"value",m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n",m.a.createElement("span",{className:"token comment"},"// => ","{"),"\n",m.a.createElement("span",{className:"token comment"},"//","   ","red: 'walk'"),"\n",m.a.createElement("span",{className:"token comment"},"// ","}")))),m.a.createElement(l.MDXTag,{name:"p",components:a},"When a simple state does not handle an ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"event"),", that ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"event")," is propagated up to its parent state to be handled. In the following example:"),m.a.createElement(l.MDXTag,{name:"ul",components:a},m.a.createElement(l.MDXTag,{name:"li",components:a,parentName:"ul"},"the ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"{ red: 'stop' }")," state does ",m.a.createElement(l.MDXTag,{name:"em",components:a,parentName:"li"},"not")," handle the ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"'TIMER'")," event"),m.a.createElement(l.MDXTag,{name:"li",components:a,parentName:"ul"},"the ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"'TIMER'")," event is sent to the ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"'red'")," parent state, which does handle it.")),m.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},m.a.createElement("pre",{className:"language-js"},m.a.createElement("code",{className:"language-js"},"console",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"log"),m.a.createElement("span",{className:"token punctuation"},"("),"lightMachine",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"transition"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{")," red",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'stop'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token string"},"'TIMER'"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},"."),"value",m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n",m.a.createElement("span",{className:"token comment"},"// => 'green'")))),m.a.createElement(l.MDXTag,{name:"p",components:a},"If neither a state nor any of its ancestor (parent) states handle an event, no transition happens. In ",m.a.createElement(l.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"strict")," mode (specified in the ",m.a.createElement(l.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"api/config.md"}},"machine configuration"),"), this will throw an error."),m.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},m.a.createElement("pre",{className:"language-js"},m.a.createElement("code",{className:"language-js"},"console",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"log"),m.a.createElement("span",{className:"token punctuation"},"("),"lightMachine",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"transition"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'green'"),m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token string"},"'UNKNOWN'"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},"."),"value",m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n",m.a.createElement("span",{className:"token comment"},"// => 'green'")))))};var p={}}}]);
//# sourceMappingURL=component---src-pages-guides-hierarchical-mdx-5eb4fb5d5a0e0cd36e9b.js.map