(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{147:function(e,a,n){"use strict";n.r(a),n.d(a,"_frontmatter",function(){return p});var t=n(167),s=n.n(t),c=n(0),m=n.n(c),o=n(168),l=n(169);a.default=function(e){var a=e.components,n=s()(e,["components"]);return m.a.createElement(o.MDXTag,{name:"wrapper",Layout:l.a,layoutProps:n,components:a},m.a.createElement(o.MDXTag,{name:"h1",components:a,props:{id:"communicating-between-machines"}},m.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"h1",props:{href:"#communicating-between-machines","aria-hidden":!0,class:"anchor"}}),"Communicating Between Machines"),m.a.createElement(o.MDXTag,{name:"p",components:a},"Expressing the entire app's behavior in a single machine can quickly become complex and unwieldy. It is natural (and encouraged!) to use multiple machines that communicate with each other to express complex logic instead. This closely resembles the ",m.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://en.wikipedia.org/wiki/Actor_model"}},"Actor model"),', where each machine instance is considered an "actor" that can send and receive events (messages) to and from other machine "actors" and react to them.'),m.a.createElement(o.MDXTag,{name:"p",components:a},"For machines to communicate, the parent machine ",m.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"p"},"invokes")," a child machine and listens to events sent from the child machine via ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"sendParent(...)"),", or waits for the child machine to reach its ",m.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"/xstate/guides/final"}},"final state"),", which will then cause the ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"onDone")," transition to be taken:"),m.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},m.a.createElement("pre",{className:"language-js"},m.a.createElement("code",{className:"language-js"},m.a.createElement("span",{className:"token keyword"},"import")," ",m.a.createElement("span",{className:"token punctuation"},"{")," Machine",m.a.createElement("span",{className:"token punctuation"},",")," actions ",m.a.createElement("span",{className:"token punctuation"},"}")," ",m.a.createElement("span",{className:"token keyword"},"from")," ",m.a.createElement("span",{className:"token string"},"'xstate'"),m.a.createElement("span",{className:"token punctuation"},";"),"\n",m.a.createElement("span",{className:"token keyword"},"import")," ",m.a.createElement("span",{className:"token punctuation"},"{")," interpret ",m.a.createElement("span",{className:"token punctuation"},"}")," ",m.a.createElement("span",{className:"token keyword"},"from")," ",m.a.createElement("span",{className:"token string"},"'xstate/lib/interpreter'"),m.a.createElement("span",{className:"token punctuation"},";"),"\n",m.a.createElement("span",{className:"token keyword"},"const")," ",m.a.createElement("span",{className:"token punctuation"},"{")," send",m.a.createElement("span",{className:"token punctuation"},",")," sendParent ",m.a.createElement("span",{className:"token punctuation"},"}")," ",m.a.createElement("span",{className:"token operator"},"=")," actions",m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," minuteMachine ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"Machine"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","id",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'timer'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'active'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","active",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","after",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token number"},"60000"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'finished'"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","finished",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{")," type",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'final'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," parentMachine ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"Machine"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","id",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'parent'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'pending'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","pending",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","invoke",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ","src",m.a.createElement("span",{className:"token punctuation"},":")," minuteMachine",m.a.createElement("span",{className:"token punctuation"},","),"\n","        ","onDone",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'timesUp'"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","timesUp",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","type",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'final'"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," service ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"interpret"),m.a.createElement("span",{className:"token punctuation"},"("),"parentMachine",m.a.createElement("span",{className:"token punctuation"},")"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"onTransition"),m.a.createElement("span",{className:"token punctuation"},"("),"state ",m.a.createElement("span",{className:"token operator"},"=>")," console",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"log"),m.a.createElement("span",{className:"token punctuation"},"("),"state",m.a.createElement("span",{className:"token punctuation"},"."),"value",m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},")"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"start"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n",m.a.createElement("span",{className:"token comment"},"// => 'pending'"),"\n",m.a.createElement("span",{className:"token comment"},"// ... after 1 minute"),"\n",m.a.createElement("span",{className:"token comment"},"// => 'timesUp'")))),m.a.createElement(o.MDXTag,{name:"h2",components:a,props:{id:"the-invoke-property"}},m.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"h2",props:{href:"#the-invoke-property","aria-hidden":!0,class:"anchor"}}),"The ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"h2"},"invoke")," Property"),m.a.createElement(o.MDXTag,{name:"p",components:a},"An invocation is defined in a state node's configuration with the ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"invoke")," property, whose value is an object that contains:"),m.a.createElement(o.MDXTag,{name:"ul",components:a},m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},m.a.createElement(o.MDXTag,{name:"p",components:a,parentName:"li"},m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"src")," - the source of the machine to invoke, which can be:"),m.a.createElement(o.MDXTag,{name:"ul",components:a,parentName:"li"},m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"a machine"),m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"a string, which refers to a machine defined in this machine's ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"options.services")),m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"a function that returns a Promise"))),m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"id")," - the unique identifier for the invoked service"),m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"forward")," - (optional) ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"true")," if all events sent to this machine should also be sent (or ",m.a.createElement(o.MDXTag,{name:"em",components:a,parentName:"li"},"forwarded"),") to the invoked child machine (",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"false")," by default)"),m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"params")," - (optional) an object that maps properties of the child machine's ",m.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"li",props:{href:"/xstate/guides/context"}},"context")," to a function that returns the corresponding value from the parent machine's ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"context"),"."),m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"onDone")," - (optional) the ",m.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"li",props:{href:"/xstate/guides/transitions"}},"transition")," to be taken when the child machine reaches its ",m.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"li",props:{href:"/xstate/guides/final"}},"final state")),m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"onError")," - (optional) the transition to be taken when the child machine encounters an execution error.")),m.a.createElement(o.MDXTag,{name:"h2",components:a,props:{id:"sending-events"}},m.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"h2",props:{href:"#sending-events","aria-hidden":!0,class:"anchor"}}),"Sending Events"),m.a.createElement(o.MDXTag,{name:"p",components:a},"Statecharts communicate hierarchically:"),m.a.createElement(o.MDXTag,{name:"ul",components:a},m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"Parent-to-child via the ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"send(EVENT, { target: 'someChildId' })")," action"),m.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"Child-to-parent via the ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"sendParent(EVENT)")," action.")),m.a.createElement(o.MDXTag,{name:"p",components:a},"Here is an example of two statecharts, ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"pingMachine")," and ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"pongMachine"),", communicating with each other via a supervisor ",m.a.createElement(o.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"parentMachine"),", which ",m.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"p"},"invokes")," both child machines:"),m.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},m.a.createElement("pre",{className:"language-js"},m.a.createElement("code",{className:"language-js"},m.a.createElement("span",{className:"token keyword"},"import")," ",m.a.createElement("span",{className:"token punctuation"},"{")," Machine",m.a.createElement("span",{className:"token punctuation"},",")," actions ",m.a.createElement("span",{className:"token punctuation"},"}")," ",m.a.createElement("span",{className:"token keyword"},"from")," ",m.a.createElement("span",{className:"token string"},"'xstate'"),m.a.createElement("span",{className:"token punctuation"},";"),"\n",m.a.createElement("span",{className:"token keyword"},"import")," ",m.a.createElement("span",{className:"token punctuation"},"{")," interpret ",m.a.createElement("span",{className:"token punctuation"},"}")," ",m.a.createElement("span",{className:"token keyword"},"from")," ",m.a.createElement("span",{className:"token string"},"'xstate/lib/interpreter'"),m.a.createElement("span",{className:"token punctuation"},";"),"\n",m.a.createElement("span",{className:"token keyword"},"const")," ",m.a.createElement("span",{className:"token punctuation"},"{")," send",m.a.createElement("span",{className:"token punctuation"},",")," sendParent ",m.a.createElement("span",{className:"token punctuation"},"}")," ",m.a.createElement("span",{className:"token operator"},"=")," actions",m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," pingMachine ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"Machine"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","id",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'ping'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'active'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","active",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","onEntry",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token function"},"sendParent"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'PING'"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},","),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token constant"},"PONG"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","actions",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token function"},"sendParent"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'PING'"),m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","            ","delay",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token number"},"1000"),"\n","          ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),"\n","        ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," pongMachine ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"Machine"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","id",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'pong'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'active'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","active",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token constant"},"PING"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","actions",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token function"},"sendParent"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'PONG'"),m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","            ","delay",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token number"},"1000"),"\n","          ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),"\n","        ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," parentMachine ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"Machine"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","id",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'parent'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'active'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","active",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","invoke",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"["),"pingMachine",m.a.createElement("span",{className:"token punctuation"},",")," pongMachine",m.a.createElement("span",{className:"token punctuation"},"]"),m.a.createElement("span",{className:"token punctuation"},","),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token constant"},"PING"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","actions",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token function"},"send"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'PING'"),m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token punctuation"},"{")," to",m.a.createElement("span",{className:"token punctuation"},":")," pongMachine",m.a.createElement("span",{className:"token punctuation"},"."),"id ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),"\n","        ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","        ",m.a.createElement("span",{className:"token constant"},"PONG"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","actions",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token function"},"send"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'PONG'"),m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token punctuation"},"{")," to",m.a.createElement("span",{className:"token punctuation"},":")," pingMachine",m.a.createElement("span",{className:"token punctuation"},"."),"id ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),"\n","        ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," service ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"interpret"),m.a.createElement("span",{className:"token punctuation"},"("),"parentMachine",m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},"."),m.a.createElement("span",{className:"token function"},"start"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n","\n",m.a.createElement("span",{className:"token comment"},"// => 'ping'"),"\n",m.a.createElement("span",{className:"token comment"},"// ..."),"\n",m.a.createElement("span",{className:"token comment"},"// => 'pong'"),"\n",m.a.createElement("span",{className:"token comment"},"// .."),"\n",m.a.createElement("span",{className:"token comment"},"// => 'ping'"),"\n",m.a.createElement("span",{className:"token comment"},"// ..."),"\n",m.a.createElement("span",{className:"token comment"},"// => 'pong'"),"\n",m.a.createElement("span",{className:"token comment"},"// ...")))),m.a.createElement(o.MDXTag,{name:"p",components:a},"Let's make the classic traffic light example more real-life and model the behavior of two traffic lights at an intersection:"),m.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},m.a.createElement("pre",{className:"language-js"},m.a.createElement("code",{className:"language-js"},m.a.createElement("span",{className:"token keyword"},"const")," northLightMachine ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"Machine"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","id",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'north'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'green'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","green",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","after",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{")," ",m.a.createElement("span",{className:"token number"},"1000"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'yellow'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","yellow",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","after",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{")," ",m.a.createElement("span",{className:"token number"},"1000"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'red'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","red",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ",m.a.createElement("span",{className:"token comment"},"// Notify parent that 'red' state was reached"),"\n","      ","onEntry",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token function"},"sendParent"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'NORTH_RED'"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},","),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{")," ",m.a.createElement("span",{className:"token constant"},"SAFE_SIGNAL"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'green'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," eastLightMachine ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"Machine"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","id",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'east'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'red'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","green",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","after",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{")," ",m.a.createElement("span",{className:"token number"},"1000"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'yellow'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","yellow",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","after",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{")," ",m.a.createElement("span",{className:"token number"},"1000"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'red'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ","red",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ",m.a.createElement("span",{className:"token comment"},"// Notify parent that 'red' state was reached"),"\n","      ","onEntry",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token function"},"sendParent"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'EAST_RED'"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},","),"\n","      ",m.a.createElement("span",{className:"token comment"},"// Wait until it's safe to turn green"),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{")," ",m.a.createElement("span",{className:"token constant"},"SAFE_SIGNAL"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'green'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token keyword"},"const")," superLightMachine ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"Machine"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","id",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'supervisor'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'active'"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","invoke",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"["),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"{")," src",m.a.createElement("span",{className:"token punctuation"},":")," northLightMachine ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"{")," src",m.a.createElement("span",{className:"token punctuation"},":")," eastLightMachine ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"]"),m.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","active",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","on",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",m.a.createElement("span",{className:"token constant"},"EAST_RED"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ",m.a.createElement("span",{className:"token comment"},"// tell 'north' machine it is safe to turn green"),"\n","          ","actions",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token function"},"send"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'SAFE_SIGNAL'"),m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token punctuation"},"{")," to",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'north'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),"\n","        ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},","),"\n","        ",m.a.createElement("span",{className:"token constant"},"NORTH_RED"),m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ",m.a.createElement("span",{className:"token comment"},"// tell 'east' machine it is safe to turn green"),"\n","          ","actions",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token function"},"send"),m.a.createElement("span",{className:"token punctuation"},"("),m.a.createElement("span",{className:"token string"},"'SAFE_SIGNAL'"),m.a.createElement("span",{className:"token punctuation"},",")," ",m.a.createElement("span",{className:"token punctuation"},"{")," to",m.a.createElement("span",{className:"token punctuation"},":")," ",m.a.createElement("span",{className:"token string"},"'east'")," ",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),"\n","        ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","      ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",m.a.createElement("span",{className:"token punctuation"},"}"),"\n",m.a.createElement("span",{className:"token punctuation"},"}"),m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";"),"\n","\n",m.a.createElement("span",{className:"token comment"},"// parent supervisor machine"),"\n",m.a.createElement("span",{className:"token keyword"},"const")," interpretedSuperLight ",m.a.createElement("span",{className:"token operator"},"=")," ",m.a.createElement("span",{className:"token function"},"interpret"),m.a.createElement("span",{className:"token punctuation"},"("),"superLightMachine",m.a.createElement("span",{className:"token punctuation"},")"),m.a.createElement("span",{className:"token punctuation"},";")))))};var p={}}}]);
//# sourceMappingURL=component---src-pages-guides-communication-mdx-d6a47e2e2b8c405c3aee.js.map