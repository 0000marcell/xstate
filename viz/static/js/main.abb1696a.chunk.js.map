{"version":3,"sources":["../../lib/utils.js","../../lib/tracker.js","../../lib/Edge.js","../../lib/Button.js","../../lib/Popover.js","../../lib/StateChartAction.js","../../lib/StateChartGuard.js","../../lib/StateChartNode.js","../../lib/StateChartVisualization.js","../../lib/VizTabs.js","../../lib/InitialEdge.js","../../lib/StatePanel.js","../../lib/Notifications.js","../../lib/User.js","../../lib/Loader.js","../../lib/LayoutButton.js","../../lib/examples.js","../../lib/App.js","../../lib/logo.js","../../lib/Header.js","../../lib/EventPanel.js","../../lib/Editor.js","../../lib/CodePanel.js","../../lib/StateChart.js","App.tsx","serviceWorker.ts","index.tsx"],"names":["flatten","array","_a","concat","apply","DELAY_EVENT_REGEX","serializeEdge","edge","cond","toString","replace","source","id","event","target","isHidden","el","rect","getBoundingClientRect","width","height","relative","childRect","parentElement","parentRect","top","right","left","bottom","center","x","y","utils_isBuiltInEvent","eventType","indexOf","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","this","tracker","Tracker","timeout_1","_this","elements","Map","window","addEventListener","cancelAnimationFrame","requestAnimationFrame","updateAll","Array","from","keys","forEach","key","update","get","element","set","listeners","Set","undefined","hidden","data","notify","desc","querySelectorAll","getAttribute","listen","listener","add","__extends","_extendStatics","d","b","setPrototypeOf","__proto__","__","constructor","create","templateObject_1","Popover_templateObject_1","StateChartAction_templateObject_1","templateObject_2","StateChartGuard_templateObject_1","StateChartNode_templateObject_1","StateChartNode_templateObject_2","templateObject_3","templateObject_4","templateObject_5","templateObject_6","templateObject_7","templateObject_8","templateObject_9","templateObject_10","templateObject_11","templateObject_12","templateObject_13","StateChartVisualization_templateObject_1","VizTabs_templateObject_1","Edge_Edge","_super","Edge","state","eventElement","sourceElement","targetElement","sourceData","props","targetData","eventData","ref","react_default","a","createRef","componentDidMount","eventId","setState","parentData","parent","render","svgRef","svg","sourceRect","eventRect","targetRect","eventCenterPt","isSelf","ptFns","transition","internal","push","prevPt","Math","min","magic","startPt_1","endPtX","abs","dx","endPt_1","dy","xDir","sign","yDir","pts","reduce","acc","ptFn","circles","slice","path","point","prevPoint","nextPoint","nextDx","nextDy","midpoint1","midpoint2","isHighlighted","preview","createElement","stroke","strokeWidth","fill","markerEnd","react","InitialEdge_extends","InitialEdge_InitialEdge","InitialEdge","r","cx","cy","Component","__makeTemplateObject","cooked","raw","defineProperty","value","StyledButton","styled_components_browser_esm","button","Popover_makeTemplateObject","StyledPopover","aside","Popover_Popover","children","StateChartAction_makeTemplateObject","StateChartAction_assign","__rest","e","getOwnPropertySymbols","StateChartAction_Code","default_highlight","language","style","monokai","customStyle","margin","StyledStateChartAction","li","StyledStateChartActionText","span","StateChartAction_StateChartAction","action","dataAttrs","type","lib_actions","assignment","title","Fragment","map","invoke","send","sendAction","JSON","stringify","to","log","StateChartGuard_makeTemplateObject","StyledSCGuard","div","StateChartGuard_StateChartGuard","guard","valid","predicate","context","color","name","StateChartNode_makeTemplateObject","StateChartNode_extends","StyledChildStates","StyledChildStatesToggle","StyledToken","StyledStateNodeHeader","header","StyledStateNode","StyledStateNodeState","StyledStateNodeEvents","StyledStateNodeActions","ul","StyledEventDot","StyledEventButton","StyledEvent","StyledActiveAnim","StateChartNode_StateChartNode","StateChartNode","toggled","stateRef","componentDidUpdate","stateNode","current","onEvent","onPreEvent","onExitPreEvent","onReset","isActive","matches","join","isPreview","dataType","data-key","data-type","data-active","data-preview","data-open","data-id","transitionCount","--level","level","--depth","data-variant","onClick","onEntry","onExit","stateActions","definition","actionString","data-action-type","data-title","invocation","states","childStateNode","toggledStates","onSelectServiceId","stopPropagation","graph","depth","ownEvent","isBuiltInEvent","disabled","nextEvents","delay","match","Number","isFinite","getEventDelay","delayExpr","machine","options","delays","isTransient","--delay","data-disabled","data-internal","onMouseOver","onMouseOut","data-delay","data-builtin","data-transient","isMs","friendlyEventName","actions","StateChartVisualization_makeTemplateObject","StateChartVisualization_assign","StyledVisualization","StateChartVisualization_StateChartVisualization","edges","service","visible","onSelectService","_b","setTransitionCount","_c","lib","_d","useState","previewEvent","useRef","err","console","error","position","--color","overflow","pointerEvents","markerWidth","markerHeight","refX","refY","markerUnits","orient","initialStateNodes","stateKeys","initialStateNode","nextState","serviceId","VizTabs_makeTemplateObject","StyledStateChartContainer","section","VizTabs_StateChartContainer","StatePanel_makeTemplateObject","StatePanel_assign","StyledField","StatePanel_templateObject_1","Field","label","opacity","data-empty","StatePanel_templateObject_2","StatePanel_templateObject_3","Notifications_templateObject_1","Notifications_templateObject_2","Notifications_templateObject_3","User_templateObject_1","User_templateObject_2","User_templateObject_3","Loader_templateObject_1","LayoutButton_templateObject_1","StyledDetails","details","StyledPanelAction","StatePanel_StatePanel","StatePanel","simplifiedState","open","values","child","Notifications_makeTemplateObject","notificationsMachine","Machine","notifications","initial","inactive","active","entry","on","NOTIFICATION.DISMISS","es_actions","ctx","immer_module","draft","splice","index","NOTIFICATIONS.QUEUE","unshift","StyledNotificationDismissButton","StyledNotification","StyledNotifications","Notifications_Notifications","notifier","setCurrent","subscribe","notification","data-severity","severity","--timeout","--index","notificationsActor","message","description","User_makeTemplateObject","StyledUserName","StyledUser","StyledImg","img","User_User","AppContext","user","data-state","toStrings","auth","login","src","avatar_url","as","examples","Loader_makeTemplateObject","StyledLoader","Loader_Loader","LayoutButton_makeTemplateObject","StyledLayoutButton","LayoutButton_LayoutButton","App_makeTemplateObject","App_assign","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","f","g","_","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","StyledApp","main","App_templateObject_1","StyledHeader","App_templateObject_2","StyledLogo","className","version","xmlnsXlink","viewBox","xmlSpace","points","App_templateObject_3","StyledLinks","nav","App_templateObject_4","StyledLink","App_templateObject_5","updateQuery","query","history","fullQuery","query_string_default","parse","location","search","replaceState","authActor","code","_code","l","createAuthActor","authCallback","App_query","appMachine","token","gist","example","pendingSave","cb","checkingCode","","authorizing","fetch","encodeURI","href","response","ok","Error","json","onDone","access_token","onError","alert","gettingUser","headers","Authorization","authorized","idle","default","patched","after","1000","posted","patching","method","files","machine.js","content","bind","posting","public","GIST.SAVE","toMachine","LOGOUT","unauthorized","LOGIN","pendingAuthorization","CODE","AUTH.CANCEL","AUTH_TIMEOUT","checking","fetching","Accept","loaded","initialState","layoutReducer","notificationsService","interpreter","onTransition","start","toJSON","Header","EventPanel_makeTemplateObject","EventPanel_templateObject_1","EventPanel_templateObject_2","EventPanel_templateObject_3","EventPanel_templateObject_4","EventPanel_templateObject_5","EventPanel_templateObject_6","Editor_templateObject_1","Editor_templateObject_2","StyledEventPanelEvents","StyledEventPanelEvent","StyledEventPanel","StyledEventPanelButtons","StyledEventPanelButton","StyledEventPanelEditor","sendEventContext","eventCode","sendEventMachine","UPDATE","AUTOFILL","SEND","EventPanel_EventPanel","records","execute","sendEventService","editorRef","eventsRef","moveCursor","moveCursorTo","navigateLineEnd","focus","scrollTop","scrollHeight","sendToService","eventJSON","time","pastEventCode","isBuiltIn","date_fns","filter","getNextEvents","nextEvent","react_ace_lib_default","editor","mode","theme","editorProps","$blockScrolling","onChange","setOptions","tabSize","fontSize","showGutter","readOnly","cursorStart","data-size","Editor_makeTemplateObject","StyledEditor","StyledButtons","Editor_Editor","setCode","onSave","changeText","isSaving","wrapEnabled","CodePanel_CodePanel","StateChart_makeTemplateObject","StateChart_extends","StyledViewTab","StateChart_templateObject_1","StyledViewTabs","StateChart_templateObject_2","StyledSidebar","StateChart_templateObject_3","StyledStateChart","StateChart_templateObject_4","createMachine","Function","machines","config","es","StateChart_StateChart","StateChart","view","handleTransition","events","formattedEvent","Date","now","prevProps","updateMachine","renderView","reset","stop","background","App","layout","dispatchLayout","data-layout","Provider","full","viz","Boolean","hostname","queryString","opener","setTimeout","close","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.abb1696a.chunk.js","sourcesContent":["export function isChildOf(childState, parentState) {\n  var marker = childState;\n\n  while (marker.parent && marker.parent !== parentState) {\n    marker = marker.parent;\n  }\n\n  return marker === parentState;\n}\nexport function flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, array);\n}\nexport function transitions(stateNode) {\n  return flatten(stateNode.ownEvents.map(function (event) {\n    return stateNode.definition.on[event];\n  }));\n}\nexport function condToString(cond) {\n  return cond.type; // if (typeof cond === \"function\") {\n  //   return cond.toString();\n  //   // return cond\n  //   //   .toString()\n  //   //   .replace(/\\n/g, \"\")\n  //   //   .match(/\\{(.*)\\}/)![1]\n  //   //   .trim();\n  // }\n  // return cond;\n}\nvar DELAY_EVENT_REGEX = /^xstate\\.after\\((.+)\\)#/;\nexport function friendlyEventName(event) {\n  var match = event.match(DELAY_EVENT_REGEX);\n\n  if (match) {\n    var isMs = Number.isFinite(+match[1]);\n    return \"after \" + match[1] + (isMs ? 'ms' : '');\n  }\n\n  match = event.match(/^done\\.state/);\n\n  if (match) {\n    return \"done\";\n  }\n\n  return event;\n}\nexport function getEventDelay(event) {\n  var match = event.match(DELAY_EVENT_REGEX);\n\n  if (match) {\n    return Number.isFinite(+match[1]) ? +match[1] : match[1];\n  }\n\n  return false;\n}\nexport function serializeEdge(edge) {\n  var cond = edge.cond ? \"[\" + edge.cond.toString().replace(/\\n/g, '') + \"]\" : '';\n  return edge.source.id + \":\" + edge.event + cond + \"->\" + edge.target.id;\n}\nexport function isHidden(el) {\n  if (!el) {\n    return true;\n  }\n\n  var rect = el.getBoundingClientRect();\n\n  if (rect.width === 0 && rect.height === 0) {\n    return true;\n  }\n\n  return false;\n}\nexport function relative(childRect, parentElement) {\n  var parentRect = parentElement.getBoundingClientRect();\n  return {\n    top: childRect.top - parentRect.top,\n    right: childRect.right - parentRect.left,\n    bottom: childRect.bottom - parentRect.top,\n    left: childRect.left - parentRect.left,\n    width: childRect.width,\n    height: childRect.height\n  };\n}\nexport function initialStateNodes(stateNode) {\n  var stateKeys = Object.keys(stateNode.states);\n  return stateNode.initialStateNodes.concat(flatten(stateKeys.map(function (key) {\n    var childStateNode = stateNode.states[key];\n\n    if (childStateNode.type === 'compound' || childStateNode.type === 'parallel') {\n      return initialStateNodes(stateNode.states[key]);\n    }\n\n    return [];\n  })));\n}\nexport function stateActions(stateNode) {\n  return stateNode.onEntry.concat(stateNode.onExit);\n}\nexport function center(rect) {\n  return {\n    x: rect.left + rect.width / 2,\n    y: rect.top + rect.height / 2\n  };\n}\nexport function isBuiltInEvent(eventType) {\n  return eventType.indexOf('xstate.') === 0 || eventType.indexOf('done.') === 0 || eventType === '';\n}","var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { isHidden } from './utils';\n\nvar Tracker =\n/** @class */\nfunction () {\n  function Tracker() {\n    var _this = this;\n\n    this.elements = new Map();\n\n    if (typeof window !== 'undefined') {\n      var timeout_1;\n      window.addEventListener('resize', function () {\n        if (timeout_1) {\n          cancelAnimationFrame(timeout_1);\n        }\n\n        timeout_1 = requestAnimationFrame(function () {\n          _this.updateAll();\n        });\n      });\n    }\n  }\n\n  Tracker.prototype.updateAll = function () {\n    var _this = this;\n\n    Array.from(this.elements.keys()).forEach(function (key) {\n      _this.update(key, _this.elements.get(key).element);\n    });\n  };\n\n  Tracker.prototype.update = function (id, element) {\n    var _this = this;\n\n    if (!this.elements.get(id)) {\n      this.elements.set(id, {\n        listeners: new Set(),\n        element: element || undefined,\n        rect: element ? element.getBoundingClientRect() : undefined,\n        hidden: isHidden(element)\n      });\n    }\n\n    var data = __assign({}, this.elements.get(id), {\n      element: element || undefined,\n      rect: element ? element.getBoundingClientRect() : undefined,\n      hidden: isHidden(element)\n    });\n\n    this.notify(data);\n\n    if (element) {\n      var desc = element.querySelectorAll(\"[data-id]\");\n      Array.from(desc).forEach(function (el) {\n        var id = el.getAttribute(\"data-id\");\n\n        _this.update(id, el);\n      });\n    }\n  };\n\n  Tracker.prototype.listen = function (id, listener) {\n    if (!this.elements.get(id)) {\n      this.elements.set(id, {\n        listeners: new Set(),\n        element: undefined,\n        rect: undefined,\n        hidden: true\n      });\n    }\n\n    var data = this.elements.get(id);\n    data.listeners.add(listener);\n    this.notify(data);\n  };\n\n  Tracker.prototype.get = function (id) {\n    if (this.elements.get(id)) {\n      return this.elements.get(id);\n    }\n\n    return undefined;\n  };\n\n  Tracker.prototype.notify = function (data) {\n    data.listeners.forEach(function (listener) {\n      listener(data);\n    });\n  };\n\n  return Tracker;\n}();\n\nvar tracker = new Tracker();\nexport { tracker };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport React, { Component } from 'react';\nimport { serializeEdge, isHidden, relative, center } from './utils';\nimport { tracker } from './tracker';\n\nfunction maybeGet(value, getter) {\n  return value ? getter(value) : undefined;\n}\n\nvar Edge =\n/** @class */\nfunction (_super) {\n  __extends(Edge, _super);\n\n  function Edge() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      eventElement: null,\n      sourceElement: null,\n      targetElement: null,\n      sourceData: tracker.get(_this.props.edge.source.id),\n      targetData: tracker.get(_this.props.edge.target.id),\n      eventData: tracker.get(serializeEdge(_this.props.edge))\n    };\n    _this.ref = React.createRef();\n    return _this;\n  }\n\n  Edge.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var edge = this.props.edge;\n    var eventId = serializeEdge(edge);\n    tracker.listen(eventId, function (data) {\n      _this.setState({\n        eventData: data\n      });\n    });\n    tracker.listen(edge.source.id, function (data) {\n      _this.setState({\n        sourceData: data\n      });\n    });\n    tracker.listen(edge.target.id, function (data) {\n      var target = edge.target;\n      var parentData = data;\n\n      while (isHidden(parentData.element)) {\n        if (!target.parent) {\n          break;\n        }\n\n        target = target.parent;\n        parentData = tracker.get(target.id);\n\n        if (!parentData) {\n          break;\n        }\n      }\n\n      _this.setState({\n        targetData: parentData || undefined\n      });\n    });\n  };\n\n  Edge.prototype.render = function () {\n    var edge = this.props.edge;\n    var _a = this.state,\n        sourceData = _a.sourceData,\n        eventData = _a.eventData,\n        targetData = _a.targetData;\n\n    if (!sourceData || sourceData.hidden || !eventData || eventData.hidden || !targetData || targetData.hidden) {\n      return null;\n    }\n\n    var strokeWidth = 2;\n    var svgRef = this.props.svg;\n    var sourceRect = relative(this.state.sourceData.rect, svgRef);\n    var eventRect = relative(this.state.eventData.rect, svgRef);\n    var targetRect = relative(this.state.targetData.rect, svgRef);\n    var magic = 10;\n    var eventCenterPt = center(eventRect);\n    var targetCenterPt = center(targetRect);\n    var isSelf = edge.source === edge.target;\n    var isInternal = edge.transition.internal;\n    var ptFns = [];\n\n    if (isInternal) {\n      ptFns.push(function () {\n        return {\n          x: eventRect.left,\n          y: eventCenterPt.y\n        };\n      });\n      ptFns.push(function (prevPt) {\n        return {\n          x: sourceRect.right,\n          y: prevPt.y\n        };\n      });\n\n      if (!isSelf) {\n        ptFns.push(function () {\n          return {\n            x: targetRect.right + magic,\n            y: targetRect.top - magic\n          };\n        }, function () {\n          return {\n            x: targetRect.right,\n            y: targetRect.top - magic\n          };\n        }, function (prevPt) {\n          return {\n            x: prevPt.x,\n            y: targetRect.top\n          };\n        });\n      } else {\n        ptFns.push(function (prevPt) {\n          if (prevPt.y > sourceRect.bottom) {\n            return {\n              x: targetRect.right - magic,\n              y: sourceRect.bottom\n            };\n          } else {\n            return {\n              x: targetRect.right,\n              y: prevPt.y\n            };\n          }\n        });\n      }\n    } else if (isSelf) {\n      ptFns.push(function () {\n        return {\n          x: sourceRect.right,\n          y: Math.min(eventCenterPt.y, sourceRect.bottom)\n        };\n      }, function (prevPt) {\n        return {\n          x: eventRect.left,\n          y: eventCenterPt.y\n        };\n      }, function (prevPt) {\n        return {\n          x: eventRect.right,\n          y: eventCenterPt.y\n        };\n      }, function (prevPt) {\n        return {\n          x: eventRect.right + magic,\n          y: eventRect.bottom\n        };\n      }, function (prevPt) {\n        return {\n          x: eventRect.right + magic * 2,\n          y: eventCenterPt.y\n        };\n      }, function (prevPt) {\n        return {\n          x: eventRect.right + magic,\n          y: eventRect.top\n        };\n      }, function (prevPt) {\n        return {\n          x: eventRect.right,\n          y: eventCenterPt.y\n        };\n      });\n    } else {\n      // go through event label\n      ptFns.push(function () {\n        return {\n          x: sourceRect.right,\n          y: Math.min(eventCenterPt.y, sourceRect.bottom)\n        };\n      }, function () {\n        return {\n          x: eventRect.left,\n          y: eventCenterPt.y\n        };\n      }, function () {\n        return {\n          x: eventRect.right,\n          y: eventCenterPt.y\n        };\n      });\n      var startPt_1 = {\n        x: eventRect.right + magic,\n        y: eventCenterPt.y\n      };\n      var endSide = void 0;\n      var endPtX = startPt_1.x < targetRect.right && startPt_1.x > targetRect.left ? startPt_1.x : Math.abs(eventRect.right - targetRect.left) < Math.abs(eventRect.right - targetRect.right) ? targetRect.left : targetRect.right;\n      var dx = endPtX - startPt_1.x;\n      var endPt_1 = {\n        x: endPtX,\n        y: dx < 0 ? targetRect.top : startPt_1.y < targetRect.bottom && startPt_1.y > targetRect.top ? startPt_1.y : Math.abs(eventRect.bottom - targetRect.top) < Math.abs(eventRect.bottom - targetRect.bottom) ? targetRect.top : targetRect.bottom\n      };\n      var dy = endPt_1.y - startPt_1.y;\n\n      if (endPt_1.y === targetRect.top) {\n        endSide = 'top';\n      } else if (endPt_1.y === targetRect.bottom) {\n        endSide = 'bottom';\n      } else {\n        if (endPt_1.x === targetRect.right) {\n          endPt_1.y = targetRect.top;\n          endSide = 'top';\n        } else {\n          endSide = 'left';\n        }\n      }\n\n      var slope = dy / dx;\n      var xDir = Math.sign(dx);\n      var yDir = Math.sign(dy);\n      ptFns.push(function () {\n        return startPt_1;\n      });\n\n      if (xDir === -1) {\n        if (yDir === -1) {\n          ptFns.push(function (prevPt) {\n            return {\n              x: prevPt.x,\n              y: Math.min(sourceRect.top - magic, targetRect.top - magic)\n            };\n          });\n          ptFns.push(function (prevPt) {\n            return {\n              x: endPt_1.x,\n              y: endPt_1.y - magic\n            };\n          });\n        } else {\n          ptFns.push(function (prevPt) {\n            return {\n              x: prevPt.x,\n              y: startPt_1.y + magic\n            };\n          });\n        }\n      } else if (startPt_1.x !== endPt_1.x) {\n        ptFns.push(function (prevPt) {\n          return {\n            x: endPt_1.x,\n            y: prevPt.y\n          };\n        });\n      }\n\n      ptFns.push(function () {\n        return endPt_1;\n      }, function () {\n        return endPt_1;\n      });\n    }\n\n    var pts = ptFns.reduce(function (acc, ptFn, i) {\n      acc.push(ptFn(acc[i - 1] || acc[0]));\n      return acc;\n    }, []);\n    var circles = pts.slice();\n    var path = pts.reduce(function (acc, point, i) {\n      if (i === 0) {\n        return \"M \" + point.x + \",\" + point.y;\n      }\n\n      if (i === pts.length - 1) {\n        return acc;\n      }\n\n      var prevPoint = pts[i - 1];\n      var nextPoint = pts[i + 1];\n      var dx = point.x - prevPoint.x;\n      var dy = point.y - prevPoint.y;\n      var nextDx = nextPoint.x - point.x;\n      var nextDy = nextPoint.y - point.y;\n      var midpoint1 = {\n        x: prevPoint.x + dx / 2,\n        y: prevPoint.y + dy / 2\n      };\n      var midpoint2 = {\n        x: point.x + nextDx / 2,\n        y: point.y + nextDy / 2\n      };\n      circles.push(midpoint1, midpoint2);\n      return (// acc + `L ${midpoint1.x},${midpoint1.y} L ${midpoint2.x},${midpoint2.y}`\n        acc + (\"L \" + midpoint1.x + \",\" + midpoint1.y + \" Q \" + point.x + \",\" + point.y + \" \" + midpoint2.x + \",\" + midpoint2.y + \" \")\n      );\n    }, '');\n    var isHighlighted = this.props.preview;\n    return React.createElement(\"g\", null, React.createElement(\"path\", {\n      d: path,\n      stroke: isHighlighted ? 'var(--color-edge-active)' : 'var(--color-edge)',\n      strokeWidth: strokeWidth,\n      fill: \"none\",\n      markerEnd: isHighlighted ? \"url(#marker-preview)\" : \"url(#marker)\",\n      ref: this.ref\n    }));\n  };\n\n  return Edge;\n}(Component);\n\nexport { Edge };","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport styled from 'styled-components';\nexport var StyledButton = styled.button(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  appearance: none;\\n  background: transparent;\\n  color: white;\\n  height: 2rem;\\n  border-radius: 0.25rem;\\n  border: none;\\n  font-weight: bold;\\n  cursor: pointer;\\n  transition: all 0.3s ease-in-out;\\n  flex-shrink: 0;\\n  text-transform: uppercase;\\n  letter-spacing: 1px;\\n\\n  &:hover {\\n    background: white;\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  &[data-variant='primary'] {\\n    background: white;\\n    color: #111;\\n    border-radius: 2px;\\n    border: none;\\n  }\\n\\n  &[data-variant='secondary'] {\\n    background: #656565;\\n    border-radius: 2px;\\n    border: none;\\n  }\\n\\n  &[data-variant='link'] {\\n    background: transparent;\\n    color: var(--color-link);\\n    letter-spacing: 0;\\n    height: auto;\\n    padding: 0;\\n    margin-left: 0.5rem;\\n  }\\n\\n  &[data-size='full'] {\\n    width: 100%;\\n  }\\n\\n  &:disabled {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\"], [\"\\n  appearance: none;\\n  background: transparent;\\n  color: white;\\n  height: 2rem;\\n  border-radius: 0.25rem;\\n  border: none;\\n  font-weight: bold;\\n  cursor: pointer;\\n  transition: all 0.3s ease-in-out;\\n  flex-shrink: 0;\\n  text-transform: uppercase;\\n  letter-spacing: 1px;\\n\\n  &:hover {\\n    background: white;\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  &[data-variant='primary'] {\\n    background: white;\\n    color: #111;\\n    border-radius: 2px;\\n    border: none;\\n  }\\n\\n  &[data-variant='secondary'] {\\n    background: #656565;\\n    border-radius: 2px;\\n    border: none;\\n  }\\n\\n  &[data-variant='link'] {\\n    background: transparent;\\n    color: var(--color-link);\\n    letter-spacing: 0;\\n    height: auto;\\n    padding: 0;\\n    margin-left: 0.5rem;\\n  }\\n\\n  &[data-size='full'] {\\n    width: 100%;\\n  }\\n\\n  &:disabled {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\"])));\nvar templateObject_1;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport styled from 'styled-components';\nimport React from 'react';\nexport var StyledPopover = styled.aside(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: absolute;\\n  bottom: 100%;\\n  left: 0;\\n  background: black;\\n  color: white;\\n  border-radius: var(--radius);\\n  pointer-events: none;\\n  opacity: 0;\\n\"], [\"\\n  position: absolute;\\n  bottom: 100%;\\n  left: 0;\\n  background: black;\\n  color: white;\\n  border-radius: var(--radius);\\n  pointer-events: none;\\n  opacity: 0;\\n\"])));\nexport var Popover = function Popover(_a) {\n  var children = _a.children;\n  return React.createElement(StyledPopover, null, children);\n};\nvar templateObject_1;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport { actionTypes } from 'xstate/lib/actions';\nimport styled from 'styled-components';\nimport { Popover, StyledPopover } from './Popover';\nimport SyntaxHighlighter from 'react-syntax-highlighter'; // @ts-ignore\n\nimport { monokai } from 'react-syntax-highlighter/dist/esm/styles/hljs';\n\nvar Code = function Code(_a) {\n  var children = _a.children;\n  return React.createElement(SyntaxHighlighter, {\n    language: \"ts\",\n    style: monokai,\n    customStyle: {\n      margin: 0\n    }\n  }, children);\n};\n\nvar StyledStateChartAction = styled.li(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: baseline;\\n  max-width: 30ch;\\n  padding: 0 0.25rem;\\n  line-height: 1rem;\\n\\n  &:hover > \", \" {\\n    opacity: 1;\\n  }\\n\\n  &:before {\\n    font-weight: bold;\\n    color: gray;\\n    margin-right: 0.25rem;\\n    font-size: 75%;\\n    content: attr(data-action-type) ' /';\\n    white-space: nowrap;\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: baseline;\\n  max-width: 30ch;\\n  padding: 0 0.25rem;\\n  line-height: 1rem;\\n\\n  &:hover > \", \" {\\n    opacity: 1;\\n  }\\n\\n  &:before {\\n    font-weight: bold;\\n    color: gray;\\n    margin-right: 0.25rem;\\n    font-size: 75%;\\n    content: attr(data-action-type) ' /';\\n    white-space: nowrap;\\n  }\\n\"])), StyledPopover);\nvar StyledStateChartActionText = styled.span(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n\"], [\"\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n\"])));\nexport var StateChartAction = function StateChartAction(_a) {\n  var action = _a.action,\n      dataAttrs = __rest(_a, [\"action\"]);\n\n  switch (action.type) {\n    case actionTypes.assign:\n      return typeof action.assignment === 'function' ? React.createElement(StyledStateChartAction, __assign({}, dataAttrs, {\n        title: \"assign\"\n      }), React.createElement(\"strong\", null, \"assign\")) : React.createElement(React.Fragment, null, Object.keys(action.assignment).map(function (key) {\n        return React.createElement(StyledStateChartAction, __assign({\n          key: key,\n          title: \"assign \" + key\n        }, dataAttrs), React.createElement(Popover, null, React.createElement(Code, null, action.assignment[key].toString())), React.createElement(StyledStateChartActionText, null, React.createElement(\"strong\", null, \"assign\"), \" \", key));\n      }));\n\n    case actionTypes.invoke:\n      return React.createElement(StyledStateChartAction, __assign({}, dataAttrs, {\n        title: \"invoke \" + action.id\n      }), React.createElement(StyledStateChartActionText, null, action.id));\n\n    case actionTypes.send:\n      var sendAction = action;\n\n      if (sendAction.event.type.indexOf('xstate.after') === 0) {\n        return null;\n      }\n\n      return React.createElement(StyledStateChartAction, __assign({}, dataAttrs, {\n        title: \"send \" + sendAction.event.type + \" to \\\"\" + JSON.stringify(sendAction.to) + \"\\\"\"\n      }), React.createElement(StyledStateChartActionText, null, React.createElement(\"em\", null, \"send\"), \" \", sendAction.event.type, ' ', sendAction.to ? \"to \" + JSON.stringify(sendAction.to) : ''));\n\n    case actionTypes.log:\n      return React.createElement(StyledStateChartAction, __assign({}, dataAttrs, {\n        title: \"log\"\n      }), React.createElement(StyledStateChartActionText, null, React.createElement(\"em\", null, \"log\")));\n\n    default:\n      if (action.type.indexOf('xstate.') === 0 && action.type !== 'xstate.invoke') {\n        return null;\n      }\n\n      return React.createElement(StyledStateChartAction, __assign({}, dataAttrs, {\n        title: action.type\n      }), React.createElement(StyledStateChartActionText, null, action.type));\n  }\n};\nvar templateObject_1, templateObject_2;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport React from 'react';\nimport styled from 'styled-components';\nvar StyledSCGuard = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 0 0.5rem;\\n\"], [\"\\n  padding: 0 0.5rem;\\n\"])));\nexport var StateChartGuard = function StateChartGuard(_a) {\n  var guard = _a.guard,\n      state = _a.state;\n  var valid = guard.predicate && typeof guard.predicate === 'function' ? guard.predicate(state.context, state.event, {\n    cond: guard\n  }) : undefined;\n  return React.createElement(StyledSCGuard, {\n    style: {\n      color: valid === undefined ? 'gray' : valid ? 'green' : 'red'\n    }\n  }, \"[\", guard.type === 'xstate.guard' ? guard.name : guard.type, \"]\");\n};\nvar templateObject_1;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport { serializeEdge, stateActions, friendlyEventName, getEventDelay } from './utils';\nimport { tracker } from './tracker';\nimport { getEdges } from 'xstate/lib/graph';\nimport { StyledButton } from './Button';\nimport { StateChartAction } from './StateChartAction';\nimport { StateChartGuard } from './StateChartGuard';\nvar StyledChildStates = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 1rem;\\n  border-top: 1px solid var(--color-border);\\n  display: flex;\\n  flex-direction: row;\\n  flex-wrap: wrap;\\n  align-items: flex-start;\\n  min-height: 1rem;\\n\"], [\"\\n  padding: 1rem;\\n  border-top: 1px solid var(--color-border);\\n  display: flex;\\n  flex-direction: row;\\n  flex-wrap: wrap;\\n  align-items: flex-start;\\n  min-height: 1rem;\\n\"])));\nvar StyledChildStatesToggle = styled.button(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  appearance: none;\\n  display: inline-flex;\\n  height: 1rem;\\n  width: 1rem;\\n  justify-content: center;\\n  align-items: center;\\n  background: transparent;\\n  border: none;\\n  padding: 0;\\n  cursor: pointer;\\n\\n  &:not(:hover) {\\n    opacity: 0.5;\\n  }\\n\\n  &:before {\\n    --dot-size: 3px;\\n    content: '';\\n    display: block;\\n    height: var(--dot-size);\\n    width: var(--dot-size);\\n    border-radius: 50%;\\n    background: var(--toggle-color, gray);\\n    flex-shrink: 0;\\n    box-shadow: calc(-1 * (var(--dot-size) + 1px)) 0 var(--toggle-color, gray),\\n      calc(var(--dot-size) + 1px) 0 var(--toggle-color, gray);\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\"], [\"\\n  appearance: none;\\n  display: inline-flex;\\n  height: 1rem;\\n  width: 1rem;\\n  justify-content: center;\\n  align-items: center;\\n  background: transparent;\\n  border: none;\\n  padding: 0;\\n  cursor: pointer;\\n\\n  &:not(:hover) {\\n    opacity: 0.5;\\n  }\\n\\n  &:before {\\n    --dot-size: 3px;\\n    content: '';\\n    display: block;\\n    height: var(--dot-size);\\n    width: var(--dot-size);\\n    border-radius: 50%;\\n    background: var(--toggle-color, gray);\\n    flex-shrink: 0;\\n    box-shadow: calc(-1 * (var(--dot-size) + 1px)) 0 var(--toggle-color, gray),\\n      calc(var(--dot-size) + 1px) 0 var(--toggle-color, gray);\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\"])));\nvar StyledToken = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  background: var(--color-border);\\n  color: inherit;\\n  font-weight: bold;\\n\"], [\"\\n  background: var(--color-border);\\n  color: inherit;\\n  font-weight: bold;\\n\"])));\nvar StyledStateNodeHeader = styled.header(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  z-index: 1;\\n  display: flex;\\n  flex-direction: row;\\n  white-space: nowrap;\\n  // position: sticky;\\n  // top: calc(var(--depth, 0) * 1rem);\\n  // background: rgba(255, 255, 255, 0.5);\\n\\n  > * {\\n    padding: 0.25rem;\\n  }\\n\\n  &:before {\\n    display: none;\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    height: 100%;\\n    width: 100%;\\n    background: var(--color-app-background);\\n  }\\n\\n  &[data-type-symbol='history' i] {\\n    --symbol-color: orange;\\n  }\\n\\n  &[data-type-symbol] {\\n    padding-right: 5em;\\n\\n    &:after {\\n      content: attr(data-type-symbol);\\n      position: absolute;\\n      top: 0;\\n      right: 0;\\n      border-bottom-left-radius: 0.25rem;\\n      background: var(--symbol-color, gray);\\n      color: white;\\n      padding: 0.25rem 0.5rem;\\n      font-weight: bold;\\n      font-size: 0.75em;\\n    }\\n  }\\n\"], [\"\\n  z-index: 1;\\n  display: flex;\\n  flex-direction: row;\\n  white-space: nowrap;\\n  // position: sticky;\\n  // top: calc(var(--depth, 0) * 1rem);\\n  // background: rgba(255, 255, 255, 0.5);\\n\\n  > * {\\n    padding: 0.25rem;\\n  }\\n\\n  &:before {\\n    display: none;\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    height: 100%;\\n    width: 100%;\\n    background: var(--color-app-background);\\n  }\\n\\n  &[data-type-symbol='history' i] {\\n    --symbol-color: orange;\\n  }\\n\\n  &[data-type-symbol] {\\n    padding-right: 5em;\\n\\n    &:after {\\n      content: attr(data-type-symbol);\\n      position: absolute;\\n      top: 0;\\n      right: 0;\\n      border-bottom-left-radius: 0.25rem;\\n      background: var(--symbol-color, gray);\\n      color: white;\\n      padding: 0.25rem 0.5rem;\\n      font-weight: bold;\\n      font-size: 0.75em;\\n    }\\n  }\\n\"])));\nvar StyledStateNode = styled.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  --color-shadow: rgba(0, 0, 0, 0.05);\\n  --color-node-border: var(--color-border);\\n  --state-event-gap: 0.5rem;\\n  position: relative;\\n  margin: 0.5rem;\\n  flex-grow: 0;\\n  flex-shrink: 1;\\n  // background: rgba(255, 255, 255, 0.5);\\n  color: #313131;\\n  min-height: 1rem;\\n  display: inline-grid;\\n  grid-template-columns: min-content auto;\\n  grid-column-gap: var(--state-event-gap);\\n  border: none;\\n\\n  &[data-type~='machine'] {\\n    display: grid;\\n    border: none;\\n    box-shadow: none;\\n    width: 100%;\\n    background: none;\\n    margin: 2rem 0;\\n    grid-template-columns: auto 1fr;\\n\\n    > \", \" {\\n      left: 1rem;\\n      font-size: 1rem;\\n    }\\n\\n    > ul {\\n      padding-right: 1.5rem;\\n    }\\n  }\\n  &:not([data-type~='machine']) {\\n    // opacity: 0.75;\\n  }\\n\\n  &:not([data-open='true']) \", \" > * {\\n    display: none;\\n  }\\n\\n  \", \" {\\n    position: absolute;\\n    bottom: 0;\\n    right: 0;\\n  }\\n\\n  &[data-type~='machine'] > \", \" {\\n    display: none;\\n  }\\n\\n  &[data-active] {\\n    --color-node-border: var(--color-primary);\\n    --color-shadow: var(--color-primary-shadow);\\n    opacity: 1;\\n\\n    > \", \" {\\n      color: var(--color-primary);\\n    }\\n\\n    > \", \" {\\n      --toggle-color: var(--color-primary);\\n    }\\n  }\\n\\n  &[data-preview]:not([data-active]) {\\n    --color-node-border: var(--color-primary-faded);\\n  }\\n\\n  &[data-type~='parallel'] {\\n    grid-template-columns: auto 1fr;\\n  }\\n\\n  &[data-type~='final'] {\\n    > div:first-child:after {\\n      content: '';\\n      position: absolute;\\n      top: -5px;\\n      left: -5px;\\n      width: calc(100% + 10px);\\n      height: calc(100% + 10px);\\n      border: 2px solid var(--color-node-border);\\n      pointer-events: none;\\n      border-radius: 6px;\\n      z-index: 1;\\n    }\\n  }\\n\\n  &:before {\\n    content: attr(data-key);\\n    color: transparent;\\n    visibility: hidden;\\n    height: 1px;\\n    display: block;\\n  }\\n\\n  &:hover {\\n    z-index: 2;\\n  }\\n\"], [\"\\n  --color-shadow: rgba(0, 0, 0, 0.05);\\n  --color-node-border: var(--color-border);\\n  --state-event-gap: 0.5rem;\\n  position: relative;\\n  margin: 0.5rem;\\n  flex-grow: 0;\\n  flex-shrink: 1;\\n  // background: rgba(255, 255, 255, 0.5);\\n  color: #313131;\\n  min-height: 1rem;\\n  display: inline-grid;\\n  grid-template-columns: min-content auto;\\n  grid-column-gap: var(--state-event-gap);\\n  border: none;\\n\\n  &[data-type~='machine'] {\\n    display: grid;\\n    border: none;\\n    box-shadow: none;\\n    width: 100%;\\n    background: none;\\n    margin: 2rem 0;\\n    grid-template-columns: auto 1fr;\\n\\n    > \", \" {\\n      left: 1rem;\\n      font-size: 1rem;\\n    }\\n\\n    > ul {\\n      padding-right: 1.5rem;\\n    }\\n  }\\n  &:not([data-type~='machine']) {\\n    // opacity: 0.75;\\n  }\\n\\n  &:not([data-open='true']) \", \" > * {\\n    display: none;\\n  }\\n\\n  \", \" {\\n    position: absolute;\\n    bottom: 0;\\n    right: 0;\\n  }\\n\\n  &[data-type~='machine'] > \", \" {\\n    display: none;\\n  }\\n\\n  &[data-active] {\\n    --color-node-border: var(--color-primary);\\n    --color-shadow: var(--color-primary-shadow);\\n    opacity: 1;\\n\\n    > \", \" {\\n      color: var(--color-primary);\\n    }\\n\\n    > \", \" {\\n      --toggle-color: var(--color-primary);\\n    }\\n  }\\n\\n  &[data-preview]:not([data-active]) {\\n    --color-node-border: var(--color-primary-faded);\\n  }\\n\\n  &[data-type~='parallel'] {\\n    grid-template-columns: auto 1fr;\\n  }\\n\\n  &[data-type~='final'] {\\n    > div:first-child:after {\\n      content: '';\\n      position: absolute;\\n      top: -5px;\\n      left: -5px;\\n      width: calc(100% + 10px);\\n      height: calc(100% + 10px);\\n      border: 2px solid var(--color-node-border);\\n      pointer-events: none;\\n      border-radius: 6px;\\n      z-index: 1;\\n    }\\n  }\\n\\n  &:before {\\n    content: attr(data-key);\\n    color: transparent;\\n    visibility: hidden;\\n    height: 1px;\\n    display: block;\\n  }\\n\\n  &:hover {\\n    z-index: 2;\\n  }\\n\"])), StyledStateNodeHeader, StyledChildStates, StyledChildStatesToggle, StyledChildStatesToggle, StyledStateNodeHeader, StyledChildStatesToggle);\nvar StyledStateNodeState = styled.div(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  grid-column: 1 / 2;\\n  align-self: self-start;\\n  border-radius: 0.25rem;\\n  border: 2px solid var(--color-node-border);\\n  text-align: left;\\n  box-shadow: 0 0.5rem 1rem var(--color-shadow);\\n  color: #313131;\\n  min-height: 1rem;\\n  z-index: 1;\\n  transition: border-color var(--duration) var(--easing);\\n\\n  &[data-type='parallel'] > \", \" > \", \" > & {\\n    border-style: dashed;\\n  }\\n\"], [\"\\n  grid-column: 1 / 2;\\n  align-self: self-start;\\n  border-radius: 0.25rem;\\n  border: 2px solid var(--color-node-border);\\n  text-align: left;\\n  box-shadow: 0 0.5rem 1rem var(--color-shadow);\\n  color: #313131;\\n  min-height: 1rem;\\n  z-index: 1;\\n  transition: border-color var(--duration) var(--easing);\\n\\n  &[data-type='parallel'] > \", \" > \", \" > & {\\n    border-style: dashed;\\n  }\\n\"])), StyledChildStates, StyledStateNode);\nvar StyledStateNodeEvents = styled.div(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  grid-column: 2 / 3;\\n  padding: 0;\\n  margin-right: 1rem;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n\\n  &:empty {\\n    display: none;\\n  }\\n\"], [\"\\n  grid-column: 2 / 3;\\n  padding: 0;\\n  margin-right: 1rem;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n\\n  &:empty {\\n    display: none;\\n  }\\n\"])));\nexport var StyledStateNodeActions = styled.ul(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n  margin-bottom: 0.5rem;\\n  z-index: 1;\\n\\n  &:empty {\\n    display: none;\\n  }\\n\"], [\"\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n  margin-bottom: 0.5rem;\\n  z-index: 1;\\n\\n  &:empty {\\n    display: none;\\n  }\\n\"])));\nvar StyledEventDot = styled.div(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n  --size: 0.5rem;\\n  position: relative;\\n  display: inline-block;\\n  height: var(--size);\\n  width: var(--size);\\n  border-radius: 50%;\\n  background-color: white;\\n\\n  &:before {\\n    content: '';\\n    position: absolute;\\n    top: -0.25rem;\\n    right: 0;\\n    width: calc(100% + 0.5rem);\\n    height: calc(100% + 0.5rem);\\n    border-radius: inherit;\\n    background-color: var(--color-event);\\n  }\\n\\n  &:after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    right: 0.25rem;\\n    width: 100%;\\n    height: 100%;\\n    border-radius: inherit;\\n    background-color: white;\\n  }\\n\"], [\"\\n  --size: 0.5rem;\\n  position: relative;\\n  display: inline-block;\\n  height: var(--size);\\n  width: var(--size);\\n  border-radius: 50%;\\n  background-color: white;\\n\\n  &:before {\\n    content: '';\\n    position: absolute;\\n    top: -0.25rem;\\n    right: 0;\\n    width: calc(100% + 0.5rem);\\n    height: calc(100% + 0.5rem);\\n    border-radius: inherit;\\n    background-color: var(--color-event);\\n  }\\n\\n  &:after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    right: 0.25rem;\\n    width: 100%;\\n    height: 100%;\\n    border-radius: inherit;\\n    background-color: white;\\n  }\\n\"])));\nvar StyledEventButton = styled.button(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n  --color-event: var(--color-primary);\\n  padding: 0;\\n  position: relative;\\n  appearance: none;\\n  border: 2px solid var(--color-event);\\n  background: white;\\n  color: white;\\n  font-size: 0.75em;\\n  font-weight: bold;\\n  cursor: pointer;\\n  border-radius: 2rem;\\n  line-height: 1;\\n  display: inline-flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: center;\\n  overflow: hidden;\\n\\n  > * {\\n    padding: 0.15rem 0.35rem;\\n  }\\n\\n  > label {\\n    background-color: var(--color-event);\\n    cursor: inherit;\\n    text-align: left;\\n    transition: background var(--duration) var(--easing);\\n\\n    &:empty {\\n      display: none;\\n    }\\n\\n    &:first-child:last-child {\\n      width: 100%;\\n    }\\n  }\\n\\n  &:not(:disabled):not([data-builtin]):hover {\\n    --color-event: var(--color-primary);\\n  }\\n\\n  &:disabled {\\n    cursor: not-allowed;\\n    --color-event: var(--color-disabled);\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  // duration\\n  &[data-delay] {\\n    > * {\\n      background: none;\\n    }\\n\\n    &:not([disabled]):before {\\n      content: '';\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background-color: var(--color-event);\\n      animation: move-left calc(var(--delay) * 1ms) linear;\\n      z-index: 0;\\n      opacity: 0.5;\\n    }\\n  }\\n\\n  @keyframes move-left {\\n    from {\\n      transform: translateX(-100%);\\n    }\\n    to {\\n      transform: none;\\n    }\\n  }\\n\\n  &[data-builtin] {\\n    color: black;\\n    font-style: italic;\\n  }\\n\\n  &[data-transient] {\\n    > \", \" {\\n      order: -1;\\n    }\\n  }\\n\"], [\"\\n  --color-event: var(--color-primary);\\n  padding: 0;\\n  position: relative;\\n  appearance: none;\\n  border: 2px solid var(--color-event);\\n  background: white;\\n  color: white;\\n  font-size: 0.75em;\\n  font-weight: bold;\\n  cursor: pointer;\\n  border-radius: 2rem;\\n  line-height: 1;\\n  display: inline-flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: center;\\n  overflow: hidden;\\n\\n  > * {\\n    padding: 0.15rem 0.35rem;\\n  }\\n\\n  > label {\\n    background-color: var(--color-event);\\n    cursor: inherit;\\n    text-align: left;\\n    transition: background var(--duration) var(--easing);\\n\\n    &:empty {\\n      display: none;\\n    }\\n\\n    &:first-child:last-child {\\n      width: 100%;\\n    }\\n  }\\n\\n  &:not(:disabled):not([data-builtin]):hover {\\n    --color-event: var(--color-primary);\\n  }\\n\\n  &:disabled {\\n    cursor: not-allowed;\\n    --color-event: var(--color-disabled);\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  // duration\\n  &[data-delay] {\\n    > * {\\n      background: none;\\n    }\\n\\n    &:not([disabled]):before {\\n      content: '';\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background-color: var(--color-event);\\n      animation: move-left calc(var(--delay) * 1ms) linear;\\n      z-index: 0;\\n      opacity: 0.5;\\n    }\\n  }\\n\\n  @keyframes move-left {\\n    from {\\n      transform: translateX(-100%);\\n    }\\n    to {\\n      transform: none;\\n    }\\n  }\\n\\n  &[data-builtin] {\\n    color: black;\\n    font-style: italic;\\n  }\\n\\n  &[data-transient] {\\n    > \", \" {\\n      order: -1;\\n    }\\n  }\\n\"])), StyledEventDot);\nvar StyledEvent = styled.div(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n  list-style: none;\\n  margin: 0;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: stretch;\\n\\n  &:not(:last-child) {\\n    margin-bottom: 0.25rem;\\n  }\\n\\n  &[data-disabled] > \", \" {\\n    opacity: 0.7;\\n  }\\n\\n  &[data-internal] {\\n  }\\n\"], [\"\\n  list-style: none;\\n  margin: 0;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: stretch;\\n\\n  &:not(:last-child) {\\n    margin-bottom: 0.25rem;\\n  }\\n\\n  &[data-disabled] > \", \" {\\n    opacity: 0.7;\\n  }\\n\\n  &[data-internal] {\\n  }\\n\"])), StyledStateNodeActions);\nvar StyledStateNodeAction = styled.div(templateObject_12 || (templateObject_12 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n\\n  &:before {\\n    content: '\\u2192';\\n    margin-right: 0.5ch;\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n\\n  &:before {\\n    content: '\\u2192';\\n    margin-right: 0.5ch;\\n  }\\n\"])));\nvar StyledActiveAnim = styled.div(templateObject_13 || (templateObject_13 = __makeTemplateObject([\"\\n  position: absolute;\\n  z-index: 0;\\n  height: 100%;\\n  width: 100%;\\n  top: 0;\\n  left: 0;\\n  animation: bg 1s both;\\n  background: var(--color-primary);\\n  will-change: opacity;\\n\\n  @keyframes bg {\\n    from {\\n      opacity: 0.5;\\n    }\\n    to {\\n      opacity: 0;\\n    }\\n  }\\n\"], [\"\\n  position: absolute;\\n  z-index: 0;\\n  height: 100%;\\n  width: 100%;\\n  top: 0;\\n  left: 0;\\n  animation: bg 1s both;\\n  background: var(--color-primary);\\n  will-change: opacity;\\n\\n  @keyframes bg {\\n    from {\\n      opacity: 0.5;\\n    }\\n    to {\\n      opacity: 0;\\n    }\\n  }\\n\"])));\n\nvar StateChartNode =\n/** @class */\nfunction (_super) {\n  __extends(StateChartNode, _super);\n\n  function StateChartNode() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      toggled: true\n    };\n    _this.stateRef = React.createRef();\n    return _this;\n  }\n\n  StateChartNode.prototype.componentDidUpdate = function () {\n    tracker.update(this.props.stateNode.id, this.stateRef.current);\n  };\n\n  StateChartNode.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        stateNode = _a.stateNode,\n        current = _a.current,\n        preview = _a.preview,\n        onEvent = _a.onEvent,\n        onPreEvent = _a.onPreEvent,\n        onExitPreEvent = _a.onExitPreEvent,\n        onReset = _a.onReset;\n    var isActive = !stateNode.parent || current.matches(stateNode.path.join('.')) || undefined;\n    var isPreview = preview ? preview.matches(stateNode.path.join('.')) || undefined : undefined;\n    var dataType = stateNode.parent ? stateNode.type : \"machine \" + stateNode.type;\n    return React.createElement(StyledStateNode, {\n      key: stateNode.id,\n      \"data-key\": stateNode.key,\n      \"data-type\": dataType,\n      \"data-active\": isActive && stateNode.parent,\n      \"data-preview\": isPreview && stateNode.parent,\n      \"data-open\": this.state.toggled || undefined,\n      ref: this.stateRef\n    }, React.createElement(StyledStateNodeState, {\n      \"data-id\": stateNode.id,\n      \"data-type\": dataType\n    }, isActive && (dataType === 'atomic' || dataType === 'final') && React.createElement(StyledActiveAnim, {\n      key: this.props.transitionCount,\n      style: {\n        // @ts-ignore\n        '--level': this.props.level\n      }\n    }), React.createElement(StyledStateNodeHeader, {\n      style: {\n        // @ts-ignore\n        '--depth': stateNode.path.length\n      }\n    }, dataType === 'history' && React.createElement(StyledToken, null, \"H\"), React.createElement(\"strong\", {\n      title: \"#\" + stateNode.id\n    }, stateNode.key), stateNode.path.length === 0 ? React.createElement(StyledButton, {\n      \"data-variant\": \"link\",\n      onClick: onReset ? function () {\n        return onReset();\n      } : undefined,\n      title: \"Reset machine to its initial state\"\n    }, \"Reset\") : null), !!stateActions(stateNode).length && React.createElement(React.Fragment, null, React.createElement(StyledStateNodeActions, null, stateNode.definition.onEntry.map(function (action) {\n      var actionString = action.type;\n      return React.createElement(StateChartAction, {\n        key: actionString,\n        \"data-action-type\": \"entry\",\n        action: action\n      });\n    })), React.createElement(StyledStateNodeActions, null, stateNode.definition.onExit.map(function (action) {\n      var actionString = action.type;\n      return React.createElement(StateChartAction, {\n        key: actionString,\n        \"data-action-type\": \"exit\",\n        action: action\n      });\n    }))), React.createElement(StyledStateNodeActions, {\n      \"data-title\": \"invoke\"\n    }, stateNode.invoke.map(function (invocation) {\n      return React.createElement(StateChartAction, {\n        key: invocation.id,\n        \"data-action-type\": \"invoke\",\n        action: invocation\n      }, invocation.id);\n    })), Object.keys(stateNode.states).length ? React.createElement(StyledChildStates, null, Object.keys(stateNode.states || []).map(function (key) {\n      var childStateNode = stateNode.states[key];\n      return React.createElement(StateChartNode, {\n        stateNode: childStateNode,\n        level: _this.props.level + 1,\n        current: current,\n        preview: preview,\n        key: childStateNode.id,\n        onEvent: onEvent,\n        onPreEvent: onPreEvent,\n        onExitPreEvent: onExitPreEvent,\n        toggledStates: _this.props.toggledStates,\n        onSelectServiceId: _this.props.onSelectServiceId,\n        transitionCount: _this.props.transitionCount\n      });\n    })) : null, Object.keys(stateNode.states).length > 0 ? React.createElement(StyledChildStatesToggle, {\n      title: this.state.toggled ? 'Hide children' : 'Show children',\n      onClick: function onClick(e) {\n        e.stopPropagation();\n\n        _this.setState({\n          toggled: !_this.state.toggled\n        }, function () {\n          tracker.updateAll();\n        });\n      }\n    }) : null), React.createElement(StyledStateNodeEvents, null, getEdges(stateNode, {\n      depth: 0\n    }).map(function (edge) {\n      var ownEvent = edge.event;\n      var isBuiltInEvent = ownEvent.indexOf('xstate.') === 0 || ownEvent.indexOf('done.') === 0;\n      var guard = edge.transition.cond;\n      var valid = guard && guard.predicate ? guard.predicate(current.context, current.event, {\n        cond: guard\n      }) : true;\n      var disabled = !valid || !isActive || current.nextEvents.indexOf(ownEvent) === -1; // || (!!edge.cond &&\n      //   typeof edge.cond === 'function' &&\n      //   !edge.cond(current.context, { type: ownEvent }, { cond: undefined, }));\n\n      var delay = isBuiltInEvent ? getEventDelay(ownEvent) : false;\n\n      if (typeof delay === 'string') {\n        var delayExpr = stateNode.machine.options.delays[delay];\n        delay = typeof delayExpr === 'number' ? delayExpr : delayExpr(current.context, current.event);\n      }\n\n      var isTransient = ownEvent === '';\n      return React.createElement(StyledEvent, {\n        style: {\n          //@ts-ignore\n          '--delay': delay || 0\n        },\n        \"data-disabled\": disabled || undefined,\n        key: serializeEdge(edge),\n        \"data-internal\": edge.transition.internal || undefined\n      }, React.createElement(StyledEventButton, {\n        onClick: function onClick() {\n          return !isBuiltInEvent ? onEvent(ownEvent) : undefined;\n        },\n        onMouseOver: function onMouseOver() {\n          return onPreEvent(ownEvent);\n        },\n        onMouseOut: function onMouseOut() {\n          return onExitPreEvent();\n        },\n        disabled: disabled,\n        \"data-delay\": edge.transition.delay,\n        \"data-builtin\": isBuiltInEvent || undefined,\n        \"data-transient\": isTransient || undefined,\n        \"data-id\": serializeEdge(edge),\n        title: ownEvent\n      }, React.createElement(\"label\", null, friendlyEventName(ownEvent)), edge.transition.cond && React.createElement(StateChartGuard, {\n        guard: edge.transition.cond,\n        state: current\n      })), !!(edge.transition.actions.length || edge.transition.cond) && React.createElement(StyledStateNodeActions, null, edge.transition.actions.map(function (action, i) {\n        return React.createElement(StateChartAction, {\n          key: i,\n          action: action,\n          \"data-action-type\": \"do\"\n        });\n      })));\n    })));\n  };\n\n  return StateChartNode;\n}(React.Component);\n\nexport { StateChartNode };\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { getEdges } from 'xstate/lib/graph';\nimport { serializeEdge, initialStateNodes } from './utils';\nimport { Edge } from './Edge';\nimport { InitialEdge } from './InitialEdge';\nimport { StateChartNode } from './StateChartNode';\nimport { useService } from '@xstate/react';\nvar StyledVisualization = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: relative;\\n  max-height: inherit;\\n  overflow-y: auto;\\n\"], [\"\\n  position: relative;\\n  max-height: inherit;\\n  overflow-y: auto;\\n\"])));\nexport var StateChartVisualization = function StateChartVisualization(_a) {\n  var service = _a.service,\n      visible = _a.visible,\n      onSelectService = _a.onSelectService,\n      onReset = _a.onReset;\n\n  var _b = useState(0),\n      transitionCount = _b[0],\n      setTransitionCount = _b[1];\n\n  var _c = useService(service),\n      current = _c[0],\n      send = _c[1];\n\n  var _d = React.useState({\n    toggledStates: {},\n    previewEvent: undefined,\n    preview: undefined\n  }),\n      state = _d[0],\n      setState = _d[1];\n\n  var svgRef = React.useRef(null);\n  var edges;\n\n  try {\n    edges = getEdges(service.machine);\n  } catch (err) {\n    edges = null;\n    console.error(err);\n  }\n\n  useEffect(function () {\n    setTransitionCount(transitionCount + 1);\n  }, [current]);\n\n  if (!visible || !edges) {\n    return null;\n  }\n\n  return React.createElement(StyledVisualization, null, React.createElement(\"svg\", {\n    width: \"100%\",\n    height: \"100%\",\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      // @ts-ignore\n      '--color': 'gray',\n      overflow: 'visible',\n      pointerEvents: 'none'\n    },\n    ref: svgRef,\n    key: JSON.stringify(state.toggledStates)\n  }, React.createElement(\"defs\", null, React.createElement(\"marker\", {\n    id: \"marker\",\n    markerWidth: \"4\",\n    markerHeight: \"4\",\n    refX: \"2\",\n    refY: \"2\",\n    markerUnits: \"strokeWidth\",\n    orient: \"auto\"\n  }, React.createElement(\"path\", {\n    d: \"M0,0 L0,4 L4,2 z\",\n    fill: \"var(--color-edge)\"\n  })), React.createElement(\"marker\", {\n    id: \"marker-preview\",\n    markerWidth: \"4\",\n    markerHeight: \"4\",\n    refX: \"2\",\n    refY: \"2\",\n    markerUnits: \"strokeWidth\",\n    orient: \"auto\"\n  }, React.createElement(\"path\", {\n    d: \"M0,0 L0,4 L4,2 z\",\n    fill: \"var(--color-edge-active)\"\n  }))), edges.map(function (edge) {\n    if (!svgRef.current) {\n      return;\n    } // const svgRect = this.svgRef.current.getBoundingClientRect();\n\n\n    return React.createElement(Edge, {\n      key: serializeEdge(edge),\n      svg: svgRef.current,\n      edge: edge,\n      preview: edge.event === state.previewEvent && current.matches(edge.source.path.join('.')) && !!state.preview && state.preview.matches(edge.target.path.join('.'))\n    });\n  }), initialStateNodes(service.machine).map(function (initialStateNode, i) {\n    if (!svgRef.current) {\n      return;\n    }\n\n    return React.createElement(InitialEdge, {\n      key: initialStateNode.id + \"_\" + i,\n      source: initialStateNode,\n      svgRef: svgRef.current,\n      preview: current.matches(initialStateNode.path.join('.')) || !!state.preview && state.preview.matches(initialStateNode.path.join('.'))\n    });\n  })), React.createElement(StateChartNode, {\n    stateNode: service.machine,\n    current: service.state,\n    transitionCount: transitionCount,\n    level: 0,\n    preview: state.preview,\n    onReset: onReset,\n    onEvent: function onEvent(event) {\n      send(event);\n    },\n    onPreEvent: function onPreEvent(event) {\n      if (!state.preview) {\n        setState(__assign({}, state, {\n          preview: service.nextState(event),\n          previewEvent: event\n        }));\n      }\n    },\n    onExitPreEvent: function onExitPreEvent() {\n      setState(__assign({}, state, {\n        preview: undefined,\n        previewEvent: undefined\n      }));\n    },\n    onSelectServiceId: function onSelectServiceId(serviceId) {\n      var s = service.children.get(serviceId);\n\n      if (s) {\n        onSelectService(s); // TODO: pass service via context\n      }\n    },\n    toggledStates: state.toggledStates\n  }));\n};\nvar templateObject_1;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport React from 'react';\nimport { StateChartVisualization } from './StateChartVisualization';\nimport styled from 'styled-components';\nexport var StyledStateChartContainer = styled.section(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-column-gap: 1rem;\\n  grid-row-gap: 1rem;\\n  padding-left: 1rem;\\n\\n  &[data-child] {\\n    grid-template-columns: 1fr 1fr;\\n  }\\n\"], [\"\\n  display: grid;\\n  grid-column-gap: 1rem;\\n  grid-row-gap: 1rem;\\n  padding-left: 1rem;\\n\\n  &[data-child] {\\n    grid-template-columns: 1fr 1fr;\\n  }\\n\"])));\nexport var StateChartContainer = function StateChartContainer(_a) {\n  var service = _a.service,\n      onReset = _a.onReset;\n  return React.createElement(StyledStateChartContainer, null, React.createElement(StateChartVisualization, {\n    service: service,\n    visible: true,\n    onSelectService: function onSelectService() {\n      return void 0;\n    },\n    onReset: onReset\n  }));\n};\nvar templateObject_1;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport React from 'react';\nimport { tracker } from './tracker';\nimport { relative } from './utils';\n\nvar InitialEdge =\n/** @class */\nfunction (_super) {\n  __extends(InitialEdge, _super);\n\n  function InitialEdge() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      sourceElement: undefined\n    };\n    return _this;\n  }\n\n  InitialEdge.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var id = this.props.source.id;\n    tracker.listen(id, function (data) {\n      _this.setState({\n        sourceElement: data.element\n      });\n    });\n  };\n\n  InitialEdge.prototype.render = function () {\n    var _a = this.props,\n        svgRef = _a.svgRef,\n        preview = _a.preview;\n\n    if (!this.state.sourceElement) {\n      return null;\n    }\n\n    var rect = relative(this.state.sourceElement.getBoundingClientRect(), svgRef);\n    var top = rect.top,\n        left = rect.left;\n    var stroke = preview ? 'var(--color-edge-active)' : 'var(--color-edge)';\n    return React.createElement(\"g\", null, React.createElement(\"circle\", {\n      r: \"4\",\n      cx: left - 10,\n      cy: top,\n      fill: stroke\n    }), React.createElement(\"path\", {\n      d: \"M \" + (left - 10) + \",\" + top + \" Q \" + (left - 10) + \",\" + (top + 10) + \" \" + (left - 1) + \",\" + (top + 10) + \" L \" + left + \",\" + (top + 10),\n      stroke: stroke,\n      strokeWidth: \"2\",\n      fill: \"none\",\n      markerEnd: preview ? \"url(#marker-preview)\" : \"url(#marker)\"\n    }));\n  };\n\n  return InitialEdge;\n}(React.Component);\n\nexport { InitialEdge };","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React from 'react';\nimport styled from 'styled-components';\nvar StyledField = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  &:not(:last-child) {\\n    margin-bottom: 1rem;\\n  }\\n\\n  margin-top: 0.5rem;\\n  width: 100%;\\n  overflow: hidden;\\n\\n  > label {\\n    text-transform: uppercase;\\n    display: block;\\n    margin-bottom: 0.5em;\\n    font-weight: bold;\\n    opacity: 0.5;\\n  }\\n\\n  &[data-empty] {\\n    opacity: 0.5;\\n    > label {\\n      margin-bottom: 0;\\n    }\\n  }\\n\"], [\"\\n  &:not(:last-child) {\\n    margin-bottom: 1rem;\\n  }\\n\\n  margin-top: 0.5rem;\\n  width: 100%;\\n  overflow: hidden;\\n\\n  > label {\\n    text-transform: uppercase;\\n    display: block;\\n    margin-bottom: 0.5em;\\n    font-weight: bold;\\n    opacity: 0.5;\\n  }\\n\\n  &[data-empty] {\\n    opacity: 0.5;\\n    > label {\\n      margin-bottom: 0;\\n    }\\n  }\\n\"])));\n\nfunction Field(_a) {\n  var label = _a.label,\n      children = _a.children,\n      disabled = _a.disabled,\n      style = _a.style;\n  return React.createElement(StyledField, {\n    style: __assign({}, style, disabled ? {\n      opacity: 0.5\n    } : undefined),\n    \"data-empty\": !children || undefined\n  }, React.createElement(\"label\", null, label), children);\n}\n\nvar StyledDetails = styled.details(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  margin: 0;\\n  padding: 0 1rem;\\n\\n  & & {\\n    border-left: 2px solid #737373;\\n  }\\n\\n  > summary {\\n    font-weight: bold;\\n    font-size: 1rem;\\n  }\\n\"], [\"\\n  margin: 0;\\n  padding: 0 1rem;\\n\\n  & & {\\n    border-left: 2px solid #737373;\\n  }\\n\\n  > summary {\\n    font-weight: bold;\\n    font-size: 1rem;\\n  }\\n\"])));\nvar StyledPanelAction = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-template-columns: auto 1fr;\\n  grid-column-gap: 1ch;\\n\\n  & + & {\\n    margin-top: 0.5rem;\\n  }\\n\\n  pre {\\n    margin: 0;\\n  }\\n\"], [\"\\n  display: grid;\\n  grid-template-columns: auto 1fr;\\n  grid-column-gap: 1ch;\\n\\n  & + & {\\n    margin-top: 0.5rem;\\n  }\\n\\n  pre {\\n    margin: 0;\\n  }\\n\"])));\nexport var StatePanel = function StatePanel(_a) {\n  var state = _a.state,\n      service = _a.service;\n  var simplifiedState = {\n    value: state.value,\n    context: state.context\n  };\n  return React.createElement(StyledDetails, {\n    key: service.id,\n    open: true\n  }, React.createElement(\"summary\", null, service.id), React.createElement(Field, {\n    label: \"state\"\n  }, React.createElement(\"pre\", null, JSON.stringify(simplifiedState, null, 2))), React.createElement(Field, {\n    label: \"actions\"\n  }, state.actions.map(function (action, i) {\n    return React.createElement(StyledPanelAction, {\n      key: i\n    }, Object.keys(action).map(function (key) {\n      var value = action[key];\n\n      if (value === undefined) {\n        return null;\n      }\n\n      return React.createElement(React.Fragment, {\n        key: key\n      }, React.createElement(\"strong\", null, key, \":\"), React.createElement(\"pre\", null, JSON.stringify(action[key], null, 2)));\n    }));\n  })), React.createElement(Field, {\n    label: \"Children\"\n  }, Array.from(service.children.values()).map(function (child, i) {\n    if (!child.state) {\n      return null;\n    }\n\n    return React.createElement(StatePanel, {\n      state: child.state,\n      service: child,\n      key: i\n    });\n  })));\n};\nvar templateObject_1, templateObject_2, templateObject_3;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport { Machine, assign } from 'xstate';\nimport { produce } from 'immer';\nimport { log } from 'xstate/lib/actions';\nimport styled from 'styled-components';\nimport { notificationsActor } from './Header';\nexport var notificationsMachine = Machine({\n  id: 'notifications',\n  context: {\n    notifications: []\n  },\n  initial: 'inactive',\n  states: {\n    inactive: {},\n    active: {\n      entry: log(),\n      on: {\n        'NOTIFICATION.DISMISS': {\n          actions: assign({\n            notifications: function notifications(ctx, e) {\n              return produce(ctx.notifications, function (draft) {\n                draft.splice(e.index, 1);\n              });\n            }\n          })\n        }\n      }\n    }\n  },\n  on: {\n    'NOTIFICATIONS.QUEUE': {\n      target: '.active',\n      actions: assign({\n        notifications: function notifications(ctx, e) {\n          return produce(ctx.notifications, function (draft) {\n            draft.unshift(e.data);\n          });\n        }\n      })\n    }\n  }\n});\nvar StyledNotificationDismissButton = styled.button(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  appearance: none;\\n  background: transparent;\\n  color: white;\\n\"], [\"\\n  appearance: none;\\n  background: transparent;\\n  color: white;\\n\"])));\nvar StyledNotification = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  padding: 1rem;\\n  margin: 1rem;\\n  border-radius: var(--radius);\\n  background: white;\\n  box-shadow: var(--shadow);\\n  animation: notification-slideDown calc(var(--timeout, 4000) * 1ms) ease both;\\n  will-change: transform;\\n  transition: transform var(--duration);\\n\\n  &[data-severity='success'] {\\n    > strong {\\n      color: #40d38d;\\n    }\\n  }\\n\\n  &[data-severity='info'] {\\n    > strong {\\n      color: #2f86eb;\\n    }\\n  }\\n\\n  &[data-severity='error'] {\\n    > strong {\\n      color: #f16462;\\n    }\\n  }\\n\\n  > \", \" {\\n    position: absolute;\\n    right: 0;\\n  }\\n\\n  @keyframes notification-slideDown {\\n    from {\\n      transform: translateY(-100%);\\n    }\\n    from,\\n    50% {\\n      pointer-events: auto;\\n      opacity: 1;\\n    }\\n    20%,\\n    to {\\n      transform: translateY(calc(var(--index) * 50%));\\n    }\\n    to {\\n      opacity: 0;\\n      pointer-events: none;\\n    }\\n  }\\n\"], [\"\\n  padding: 1rem;\\n  margin: 1rem;\\n  border-radius: var(--radius);\\n  background: white;\\n  box-shadow: var(--shadow);\\n  animation: notification-slideDown calc(var(--timeout, 4000) * 1ms) ease both;\\n  will-change: transform;\\n  transition: transform var(--duration);\\n\\n  &[data-severity='success'] {\\n    > strong {\\n      color: #40d38d;\\n    }\\n  }\\n\\n  &[data-severity='info'] {\\n    > strong {\\n      color: #2f86eb;\\n    }\\n  }\\n\\n  &[data-severity='error'] {\\n    > strong {\\n      color: #f16462;\\n    }\\n  }\\n\\n  > \", \" {\\n    position: absolute;\\n    right: 0;\\n  }\\n\\n  @keyframes notification-slideDown {\\n    from {\\n      transform: translateY(-100%);\\n    }\\n    from,\\n    50% {\\n      pointer-events: auto;\\n      opacity: 1;\\n    }\\n    20%,\\n    to {\\n      transform: translateY(calc(var(--index) * 50%));\\n    }\\n    to {\\n      opacity: 0;\\n      pointer-events: none;\\n    }\\n  }\\n\"])), StyledNotificationDismissButton);\nvar StyledNotifications = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  pointer-events: none;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: center;\\n  z-index: 10;\\n\\n  > \", \" {\\n    position: absolute;\\n    pointer-events: auto;\\n  }\\n\"], [\"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  pointer-events: none;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: center;\\n  z-index: 10;\\n\\n  > \", \" {\\n    position: absolute;\\n    pointer-events: auto;\\n  }\\n\"])), StyledNotification);\nexport var Notifications = function Notifications(_a) {\n  var notifier = _a.notifier;\n\n  var _b = useState(),\n      current = _b[0],\n      setCurrent = _b[1];\n\n  useEffect(function () {\n    notifier.subscribe(function (state) {\n      setCurrent(state);\n    });\n  }, []);\n\n  if (!current) {\n    return null;\n  }\n\n  var notifications = current.context.notifications;\n  return React.createElement(StyledNotifications, null, notifications.map(function (notification, i) {\n    return React.createElement(StyledNotification, {\n      key: notifications.length - i,\n      \"data-severity\": notification.severity,\n      style: {\n        // @ts-ignore\n        '--timeout': 5000,\n        '--index': i\n      },\n      onClick: function onClick() {\n        return notificationsActor.send({\n          type: 'NOTIFICATION.DISMISS',\n          index: i\n        });\n      }\n    }, React.createElement(\"strong\", null, notification.message), notification.description && React.createElement(\"div\", null, React.createElement(\"small\", null, notification.description)));\n  }));\n};\nvar templateObject_1, templateObject_2, templateObject_3;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport React, { useContext } from 'react';\nimport { AppContext } from './App';\nimport styled from 'styled-components';\nimport { StyledButton } from './Button';\nvar StyledUserName = styled.a(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  font-weight: bold;\\n\"], [\"\\n  font-weight: bold;\\n\"])));\nvar StyledUser = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  height: 100%;\\n  display: grid;\\n  grid-template-columns: 1fr 3rem;\\n  grid-column-gap: 1rem;\\n  grid-template-rows: 50% 50%;\\n  grid-template-areas:\\n    'name avatar'\\n    'details avatar';\\n  padding: 0.5rem;\\n\\n  &:not([data-state~='auth.authorized']) {\\n    display: flex;\\n    justify-content: flex-end;\\n    align-items: center;\\n  }\\n\\n  > \", \" {\\n    justify-self: end;\\n  }\\n\\n  > figure {\\n    margin: 0;\\n    grid-area: avatar;\\n  }\\n\"], [\"\\n  height: 100%;\\n  display: grid;\\n  grid-template-columns: 1fr 3rem;\\n  grid-column-gap: 1rem;\\n  grid-template-rows: 50% 50%;\\n  grid-template-areas:\\n    'name avatar'\\n    'details avatar';\\n  padding: 0.5rem;\\n\\n  &:not([data-state~='auth.authorized']) {\\n    display: flex;\\n    justify-content: flex-end;\\n    align-items: center;\\n  }\\n\\n  > \", \" {\\n    justify-self: end;\\n  }\\n\\n  > figure {\\n    margin: 0;\\n    grid-area: avatar;\\n  }\\n\"])), StyledUserName);\nvar StyledImg = styled.img(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  height: 100%;\\n  border-radius: 0.5rem;\\n  background: gray;\\n\"], [\"\\n  height: 100%;\\n  border-radius: 0.5rem;\\n  background: gray;\\n\"])));\nexport var User = function User() {\n  var _a = useContext(AppContext),\n      state = _a.state,\n      send = _a.send;\n\n  var user = state.context.user;\n  console.log(state);\n  return React.createElement(\"div\", null, React.createElement(StyledUser, {\n    \"data-state\": state.toStrings().join(' ')\n  }, state.matches({\n    auth: 'unauthorized'\n  }) ? React.createElement(StyledButton, {\n    \"data-variant\": \"link\",\n    onClick: function onClick() {\n      return send('LOGIN');\n    }\n  }, \"Login\") : !state.matches({\n    auth: 'authorized'\n  }) ? React.createElement(\"div\", null, \"Authorizing...\", ' ', React.createElement(StyledButton, {\n    \"data-variant\": \"link\",\n    onClick: function onClick() {\n      return send('AUTH.CANCEL');\n    }\n  }, \"Cancel\")) : React.createElement(React.Fragment, null, React.createElement(StyledUserName, null, user ? user.login : React.createElement(\"em\", null, \"Anonymous\")), React.createElement(StyledButton, {\n    \"data-variant\": \"link\",\n    onClick: function onClick() {\n      return send('LOGOUT');\n    }\n  }, \"Log out\"), React.createElement(\"figure\", null, user ? React.createElement(StyledImg, {\n    src: user.avatar_url\n  }) : React.createElement(StyledImg, {\n    as: \"div\"\n  })))));\n};\nvar templateObject_1, templateObject_2, templateObject_3;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport React from 'react';\nimport styled from 'styled-components';\nvar StyledLoader = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 1rem;\\n  padding-top: 1.5rem;\\n  margin: auto auto;\\n  transform-style: preserve-3d;\\n  perspective: 100px;\\n  text-align: center;\\n  font-size: 80%;\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  letter-spacing: 1px;\\n\\n  &:before,\\n  &:after {\\n    content: '';\\n    width: 1rem;\\n    height: 1rem;\\n    top: 0;\\n    left: calc(50% - 0.5rem);\\n    position: absolute;\\n    border: 2px solid rgba(87, 176, 234, 1);\\n    border-radius: 0.2rem;\\n    animation: loader-box 1s infinite both;\\n  }\\n\\n  &:after {\\n    animation-delay: 0.5s;\\n  }\\n\\n  @keyframes loader-box {\\n    from {\\n      transform: rotateY(40deg) translateX(150%);\\n      opacity: 0;\\n    }\\n    50% {\\n      transform: none;\\n      opacity: 1;\\n    }\\n    to {\\n      transform: rotateY(-40deg) translateX(-150%);\\n      opacity: 0;\\n    }\\n  }\\n\"], [\"\\n  padding: 1rem;\\n  padding-top: 1.5rem;\\n  margin: auto auto;\\n  transform-style: preserve-3d;\\n  perspective: 100px;\\n  text-align: center;\\n  font-size: 80%;\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  letter-spacing: 1px;\\n\\n  &:before,\\n  &:after {\\n    content: '';\\n    width: 1rem;\\n    height: 1rem;\\n    top: 0;\\n    left: calc(50% - 0.5rem);\\n    position: absolute;\\n    border: 2px solid rgba(87, 176, 234, 1);\\n    border-radius: 0.2rem;\\n    animation: loader-box 1s infinite both;\\n  }\\n\\n  &:after {\\n    animation-delay: 0.5s;\\n  }\\n\\n  @keyframes loader-box {\\n    from {\\n      transform: rotateY(40deg) translateX(150%);\\n      opacity: 0;\\n    }\\n    50% {\\n      transform: none;\\n      opacity: 1;\\n    }\\n    to {\\n      transform: rotateY(-40deg) translateX(-150%);\\n      opacity: 0;\\n    }\\n  }\\n\"])));\nexport var Loader = function Loader(_a) {\n  var _b = _a.children,\n      children = _b === void 0 ? 'Loading...' : _b;\n  return React.createElement(StyledLoader, null, children);\n};\nvar templateObject_1;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport React from 'react';\nimport styled from 'styled-components';\nexport var StyledLayoutButton = styled.button(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  appearance: none;\\n  background: white;\\n  box-shadow: var(--shadow);\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  padding: 0.5rem 1rem;\\n  border-top-left-radius: 1rem;\\n  border-bottom-left-radius: 1rem;\\n  color: black;\\n  border: none;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  cursor: pointer;\\n  z-index: 2;\\n  margin-top: 1rem;\\n  opacity: 0.7;\\n  transition: all var(--duration) var(--easing);\\n  transform: translateX(0.5rem);\\n\\n  &:focus,\\n  &:hover {\\n    outline: none;\\n  }\\n\\n  &:hover {\\n    opacity: 1;\\n    transform: none;\\n  }\\n\\n  [data-layout='viz'] & {\\n    right: 100%;\\n    color: black;\\n  }\\n\"], [\"\\n  appearance: none;\\n  background: white;\\n  box-shadow: var(--shadow);\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  padding: 0.5rem 1rem;\\n  border-top-left-radius: 1rem;\\n  border-bottom-left-radius: 1rem;\\n  color: black;\\n  border: none;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  cursor: pointer;\\n  z-index: 2;\\n  margin-top: 1rem;\\n  opacity: 0.7;\\n  transition: all var(--duration) var(--easing);\\n  transform: translateX(0.5rem);\\n\\n  &:focus,\\n  &:hover {\\n    outline: none;\\n  }\\n\\n  &:hover {\\n    opacity: 1;\\n    transform: none;\\n  }\\n\\n  [data-layout='viz'] & {\\n    right: 100%;\\n    color: black;\\n  }\\n\"])));\nexport var LayoutButton = function LayoutButton(_a) {\n  var onClick = _a.onClick,\n      children = _a.children;\n  return React.createElement(StyledLayoutButton, {\n    onClick: onClick\n  }, children);\n};\nvar templateObject_1;","var examples = {\n  omni: \"Machine({\\n    id: 'example',\\n    initial: 'leaf',\\n    states: {\\n      leaf: {\\n        on: {\\n          NEXT: 'compound'\\n        }\\n      },\\n      'another leaf': {\\n        entry: ['one', 'two'],\\n        exit: ['three', 'four'],\\n        on: {\\n          NEXT: {\\n            target: 'compound',\\n            cond: function someCondition() { return true }\\n          },\\n          NEVER: {\\n            target: 'leaf',\\n            cond: function falseCondition() { return false }\\n          }\\n        }\\n      },\\n      compound: {\\n        initial: 'child 1',\\n        states: {\\n          'child 1': {\\n            on: {\\n              NEXT: 'child 2'\\n            }\\n          },\\n          'child 2': {\\n            initial: 'subchild 1',\\n            states: {\\n              'subchild 1': {\\n                on: { NEXT: 'subchild 2' }\\n              },\\n              'subchild 2': {\\n                on: { NEXT: 'subchild 3', PREV: 'subchild 1' }\\n              },\\n              'subchild 3': {\\n                type: 'final'\\n              }\\n            }\\n          }\\n        },\\n        on: {\\n          PREV: 'leaf',\\n          NEXT: 'parallel',\\n          INTERNAL: '.child 1'\\n        }\\n      },\\n      parallel: {\\n        type: 'parallel',\\n        states: {\\n          foo: {},\\n          bar: {\\n            initial: 'one',\\n            states: {\\n              one: {\\n                on: {\\n                  NEXT: 'two'\\n                }\\n              },\\n              two: {\\n                on: {\\n                  NEXT: 'three',\\n                  PREV: 'two'\\n                }\\n              },\\n              three: {\\n                on: {\\n                  SELF: 'three',\\n                  SELF_INTERNAL: '.',\\n                  PREV: 'two',\\n                  CYCLE: 'one'\\n                }\\n              }\\n            }\\n          },\\n          baz: {\\n            initial: 'one',\\n            states: {\\n              one: {\\n                on: {\\n                  TWO_CHILD: 'two.foo'\\n                }\\n              },\\n              two: {\\n                initial: 'foo',\\n                states: {\\n                  foo: {},\\n                  bar: {},\\n                  history: {\\n                    type: 'history'\\n                  }\\n                }\\n              },\\n              three: {}\\n            }\\n          }\\n        }\\n      }\\n    }\\n  })\",\n  light: \"\\n  // Available variables:\\n  // Machine (machine factory function)\\n  // assign (action)\\n  // XState (all XState exports)\\n  \\n  const fetchMachine = Machine({\\n    id: 'fetch',\\n    context: { attempts: 0 },\\n    initial: 'idle',\\n    invoke: {\\n      id: 'child',\\n      src: () => Machine({\\n        initial: 'foo',\\n        context: { value: 3 },\\n        states: {\\n          foo: {\\n            invoke: Machine({ initial: 'yah', states: { yah: {\\n              on: {\\n                FOO: { target: 'yah' }\\n              }\\n            }}}),\\n            on: { EVENT: 'bar' }\\n          },\\n          bar: {}\\n        }\\n      })\\n    },\\n    states: {\\n      idle: {\\n        on: {\\n          FETCH: {\\n            target: 'pending',\\n            cond: function canFetch() { return true },\\n            actions: 'fetchData'\\n          }\\n        },\\n        entry: ['one', 'two', 'three'],\\n        exit: [send('EVENT', { to: 'child' }), 'foobar']\\n      },\\n      pending: {\\n        entry: assign({\\n          attempts: ctx => ctx.attempts + 1\\n        }),\\n        after: {\\n          TIMEOUT: 'rejected'\\n        },\\n        on: {\\n          RESOLVE: 'fulfilled',\\n          REJECT: 'rejected'\\n        }\\n      },\\n      fulfilled: {\\n        initial: 'first',\\n        states: {\\n          first: {\\n            on: {\\n              NEXT: 'second'\\n            }\\n          },\\n          second: {\\n            on: {\\n              NEXT: 'third'\\n            }\\n          },\\n          third: {\\n            type: 'final'\\n          }\\n        }\\n      },\\n      rejected: {\\n        entry: assign({\\n          ref: () => spawn(Machine({ initial: 'foo', states: {foo: {}}}))\\n        }),\\n        initial: 'can retry',\\n        states: {\\n          'can retry': {\\n            on: {\\n              '': {\\n                target: 'failure',\\n                cond: 'maxAttempts'\\n              }\\n            }\\n          },\\n          failure: {\\n            on: {\\n              RETRY: undefined,\\n            },\\n            type: 'final'\\n          }\\n        },\\n        on: {\\n          RETRY: 'pending'\\n        }\\n      }\\n    }\\n  }, {\\n    guards: {\\n      maxAttempts: ctx =>  ctx.attempts >= 5\\n    },\\n    delays: {\\n      TIMEOUT: 2000\\n    }\\n  });\\n  \",\n  another: \"\\n  const m = Machine({\\n    initial: 'b',\\n    context: {\\n      foo: undefined\\n    },\\n    states: {\\n      b: { on: {T:'yeah'}},\\n      yeah: {\\n        entry: assign({\\n          foo: () => {\\n            return spawn(Promise.resolve(42));\\n          }\\n        })\\n      }\\n    }\\n  });\\n  \"\n};\nexport { examples };","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _this = this;\n\nimport React, { createContext, useReducer } from 'react';\nimport { StateChart } from './index';\nimport styled from 'styled-components';\nimport { Machine, assign } from 'xstate';\nimport queryString from 'query-string';\nimport { useMachine } from '@xstate/react';\nimport { log, send } from 'xstate/lib/actions';\nimport { User } from './User';\nimport { examples } from './examples';\nimport { Header, notificationsActor } from './Header';\nimport { Logo } from './logo';\nimport { Loader } from './Loader';\nimport { LayoutButton, StyledLayoutButton } from './LayoutButton';\nimport { toMachine } from './StateChart';\nimport { getEdges } from 'xstate/lib/graph';\nvar StyledApp = styled.main(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  --color-app-background: #fff;\\n  --color-border: #dedede;\\n  --color-primary: rgba(87, 176, 234, 1);\\n  --color-primary-faded: rgba(87, 176, 234, 0.5);\\n  --color-primary-shadow: rgba(87, 176, 234, 0.1);\\n  --color-link: rgba(87, 176, 234, 1);\\n  --color-disabled: #c7c5c5;\\n  --color-edge: rgba(0, 0, 0, 0.2);\\n  --color-edge-active: var(--color-primary);\\n  --color-secondary: rgba(255, 152, 0, 1);\\n  --color-secondary-light: rgba(255, 152, 0, 0.5);\\n  --color-sidebar: #272722;\\n  --radius: 0.2rem;\\n  --border-width: 2px;\\n  --sidebar-width: 25rem;\\n  --shadow: 0 0.5rem 1rem var(--shadow-color, rgba(0, 0, 0, 0.2));\\n  --duration: 0.2s;\\n  --easing: cubic-bezier(0.5, 0, 0.5, 1);\\n\\n  height: 100%;\\n  display: grid;\\n  grid-template-areas:\\n    'header sidebar'\\n    'content content';\\n  grid-template-rows: 3rem auto;\\n  grid-template-columns: auto var(--sidebar-width);\\n  overflow: hidden;\\n\\n  > \", \" {\\n    display: inline-block;\\n    grid-row: 2;\\n    grid-column: -1;\\n  }\\n\"], [\"\\n  --color-app-background: #fff;\\n  --color-border: #dedede;\\n  --color-primary: rgba(87, 176, 234, 1);\\n  --color-primary-faded: rgba(87, 176, 234, 0.5);\\n  --color-primary-shadow: rgba(87, 176, 234, 0.1);\\n  --color-link: rgba(87, 176, 234, 1);\\n  --color-disabled: #c7c5c5;\\n  --color-edge: rgba(0, 0, 0, 0.2);\\n  --color-edge-active: var(--color-primary);\\n  --color-secondary: rgba(255, 152, 0, 1);\\n  --color-secondary-light: rgba(255, 152, 0, 0.5);\\n  --color-sidebar: #272722;\\n  --radius: 0.2rem;\\n  --border-width: 2px;\\n  --sidebar-width: 25rem;\\n  --shadow: 0 0.5rem 1rem var(--shadow-color, rgba(0, 0, 0, 0.2));\\n  --duration: 0.2s;\\n  --easing: cubic-bezier(0.5, 0, 0.5, 1);\\n\\n  height: 100%;\\n  display: grid;\\n  grid-template-areas:\\n    'header sidebar'\\n    'content content';\\n  grid-template-rows: 3rem auto;\\n  grid-template-columns: auto var(--sidebar-width);\\n  overflow: hidden;\\n\\n  > \", \" {\\n    display: inline-block;\\n    grid-row: 2;\\n    grid-column: -1;\\n  }\\n\"])), StyledLayoutButton);\nexport var StyledHeader = styled.header(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: stretch;\\n  grid-area: header;\\n  padding: 0.5rem 1rem;\\n  z-index: 10;\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: stretch;\\n  grid-area: header;\\n  padding: 0.5rem 1rem;\\n  z-index: 10;\\n\"])));\nexport var StyledLogo = styled(Logo)(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  height: 2rem;\\n\"], [\"\\n  height: 2rem;\\n\"])));\nexport var StyledLinks = styled.nav(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  margin-left: auto;\\n\\n  &,\\n  &:visited {\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  margin-left: auto;\\n\\n  &,\\n  &:visited {\\n  }\\n\"])));\nexport var StyledLink = styled.a(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  text-decoration: none;\\n  color: #57b0ea;\\n  text-transform: uppercase;\\n  display: block;\\n  font-size: 75%;\\n  font-weight: bold;\\n  margin: 0 0.25rem;\\n\"], [\"\\n  text-decoration: none;\\n  color: #57b0ea;\\n  text-transform: uppercase;\\n  display: block;\\n  font-size: 75%;\\n  font-weight: bold;\\n  margin: 0 0.25rem;\\n\"])));\n\nvar invokeSaveGist = function invokeSaveGist(ctx, e) {\n  return fetch(\"https://api.github.com/gists/\" + ctx.gist, {\n    method: 'post',\n    body: JSON.stringify({\n      description: 'XState test',\n      files: {\n        'machine.js': {\n          content: e.code\n        }\n      }\n    }),\n    headers: {\n      Authorization: \"token \" + ctx.token\n    }\n  }).then(function (response) {\n    return __awaiter(_this, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!!response.ok) return [3\n            /*break*/\n            , 2];\n            _a = Error.bind;\n            return [4\n            /*yield*/\n            , response.json()];\n\n          case 1:\n            throw new (_a.apply(Error, [void 0, _b.sent().message]))();\n\n          case 2:\n            return [2\n            /*return*/\n            , response.json()];\n        }\n      });\n    });\n  });\n};\n\nvar invokePostGist = function invokePostGist(ctx, e) {\n  return fetch(\"https://api.github.com/gists\", {\n    method: 'post',\n    body: JSON.stringify({\n      description: 'Generated by [XState Viz](https://xstate.js.org/viz)',\n      public: true,\n      files: {\n        'machine.js': {\n          content: e.code\n        }\n      }\n    }),\n    headers: {\n      Authorization: \"token \" + ctx.token\n    }\n  }).then(function (response) {\n    if (!response.ok) {\n      throw new Error('Unable to post gist');\n    }\n\n    return response.json();\n  });\n};\n\nvar invokeFetchGist = function invokeFetchGist(ctx) {\n  return fetch(\"https://api.github.com/gists/\" + ctx.query.gist, {\n    headers: {\n      Accept: 'application/json'\n    }\n  }).then(function (data) {\n    return __awaiter(_this, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!!data.ok) return [3\n            /*break*/\n            , 2];\n            _a = Error.bind;\n            return [4\n            /*yield*/\n            , data.json()];\n\n          case 1:\n            throw new (_a.apply(Error, [void 0, _b.sent().message]))();\n\n          case 2:\n            return [2\n            /*return*/\n            , data.json()];\n        }\n      });\n    });\n  });\n};\n\nvar getUser = function getUser(ctx) {\n  return fetch(\"https://api.github.com/user\", {\n    headers: {\n      Authorization: \"token \" + ctx.token\n    }\n  }).then(function (response) {\n    if (!response.ok) {\n      throw new Error('Unable to get user');\n    }\n\n    return response.json();\n  });\n};\n\nfunction createAuthActor() {\n  var listener = null;\n  var code = null;\n  return {\n    send: function send(_code) {\n      code = _code;\n\n      if (listener) {\n        listener(_code);\n      }\n    },\n    listen: function listen(l) {\n      listener = l;\n\n      if (code) {\n        listener(code);\n      }\n    }\n  };\n}\n\nfunction updateQuery(query) {\n  if (!window.history) return;\n\n  var fullQuery = __assign({}, queryString.parse(window.location.search), query);\n\n  window.history.replaceState(null, '', \"?\" + queryString.stringify(fullQuery));\n}\n\nwindow.updateQuery = updateQuery;\nvar authActor = createAuthActor();\n\nwindow.authCallback = function (code) {\n  authActor.send(code);\n};\n\nvar query = queryString.parse(window.location.search);\nvar appMachine = Machine({\n  id: 'app',\n  context: {\n    query: query,\n    // token: undefined,\n    token: process.env.REACT_APP_TEST_TOKEN,\n    gist: query.gist || undefined,\n    example: examples.omni,\n    user: undefined,\n    pendingSave: false\n  },\n  invoke: [{\n    id: 'test',\n    src: function src() {\n      return function (cb) {\n        authActor.listen(function (code) {\n          cb({\n            type: 'CODE',\n            code: code\n          });\n        });\n      };\n    }\n  }],\n  type: 'parallel',\n  states: {\n    auth: {\n      initial: 'checkingCode',\n      states: {\n        checkingCode: {\n          on: {\n            '': [{\n              target: 'authorizing',\n              cond: function cond(ctx) {\n                return !!ctx.query.code;\n              }\n            }, {\n              target: 'gettingUser',\n              cond: function cond(ctx) {\n                return !!ctx.token;\n              }\n            }, {\n              target: 'unauthorized',\n              actions: assign({\n                example: examples.light\n              })\n            }]\n          }\n        },\n        authorizing: {\n          invoke: {\n            src: function src(ctx, e) {\n              return fetch(\"https://xstate-gist.azurewebsites.net/api/GistPost?code=\" + e.code + \"&redirect_uri=\" + encodeURI(window.location.href)).then(function (response) {\n                if (!response.ok) {\n                  throw new Error('unauthorized');\n                }\n\n                return response.json();\n              }).then(function (data) {\n                if (data.error) {\n                  throw new Error('expired code');\n                }\n\n                return data;\n              });\n            },\n            onDone: {\n              target: 'gettingUser',\n              actions: assign({\n                token: function token(ctx, e) {\n                  return e.data.access_token;\n                }\n              })\n            },\n            onError: {\n              target: 'unauthorized',\n              actions: function actions(_, e) {\n                return alert(e.data);\n              }\n            }\n          }\n        },\n        gettingUser: {\n          invoke: {\n            src: getUser,\n            onDone: {\n              target: 'authorized',\n              actions: assign({\n                // @ts-ignore\n                user: function user(_, e) {\n                  return e.data;\n                }\n              })\n            },\n            onError: {\n              target: 'unauthorized',\n              actions: function actions(_, e) {\n                notificationsActor.notify({\n                  message: 'Authorization failed',\n                  description: e.data.message,\n                  severity: 'error'\n                });\n              }\n            }\n          }\n        },\n        authorized: {\n          type: 'parallel',\n          states: {\n            user: {},\n            gist: {\n              initial: 'idle',\n              states: {\n                idle: {\n                  initial: 'default',\n                  states: {\n                    default: {},\n                    patched: {\n                      after: {\n                        1000: 'default'\n                      }\n                    },\n                    posted: {\n                      after: {\n                        1000: 'default'\n                      }\n                    }\n                  }\n                },\n                patching: {\n                  invoke: {\n                    src: invokeSaveGist,\n                    onDone: {\n                      target: 'idle.patched',\n                      actions: [log(), function (ctx) {\n                        return notificationsActor.notify('Gist saved!');\n                      }]\n                    },\n                    onError: {\n                      target: 'idle',\n                      actions: function actions(ctx, e) {\n                        return notificationsActor.notify({\n                          message: 'Unable to save machine',\n                          severity: 'error',\n                          description: e.data.message\n                        });\n                      }\n                    }\n                  }\n                },\n                posting: {\n                  invoke: {\n                    src: invokePostGist,\n                    onDone: {\n                      target: 'idle.posted',\n                      actions: [assign({\n                        gist: function gist(_, e) {\n                          return e.data.id;\n                        }\n                      }), function () {\n                        return notificationsActor.notify('Gist created!');\n                      }, function (_a) {\n                        var gist = _a.gist;\n                        return updateQuery({\n                          gist: gist\n                        });\n                      }]\n                    }\n                  }\n                }\n              },\n              on: {\n                '': {\n                  actions: [assign({\n                    pendingSave: false\n                  }), send('GIST.SAVE')],\n                  cond: function cond(ctx) {\n                    return ctx.pendingSave;\n                  }\n                },\n                'GIST.SAVE': [{\n                  target: '.idle',\n                  cond: function cond(_, e) {\n                    try {\n                      var machine = toMachine(e.code);\n                      getEdges(machine);\n                    } catch (e) {\n                      notificationsActor.notify({\n                        message: 'Failed to save machine',\n                        severity: 'error',\n                        description: e.message\n                      });\n                      return true;\n                    }\n\n                    return false;\n                  }\n                }, {\n                  target: '.patching',\n                  cond: function cond(ctx) {\n                    return !!ctx.gist;\n                  }\n                }, {\n                  target: '.posting'\n                }]\n              }\n            }\n          },\n          on: {\n            LOGOUT: {\n              target: 'unauthorized',\n              actions: assign({\n                token: undefined,\n                user: undefined\n              })\n            }\n          }\n        },\n        unauthorized: {\n          on: {\n            LOGIN: 'pendingAuthorization',\n            'GIST.SAVE': {\n              target: 'pendingAuthorization',\n              actions: assign({\n                pendingSave: true\n              })\n            }\n          }\n        },\n        pendingAuthorization: {\n          entry: function entry() {\n            window.open('https://github.com/login/oauth/authorize?client_id=39c1ec91c4ed507f6e4c&scope=gist', 'Login with GitHub', 'width=800,height=600');\n          },\n          on: {\n            CODE: 'authorizing',\n            'AUTH.CANCEL': 'unauthorized'\n          },\n          after: {\n            AUTH_TIMEOUT: {\n              target: 'unauthorized',\n              actions: function actions() {\n                notificationsActor.notify({\n                  message: 'Authorization timed out',\n                  severity: 'error'\n                });\n              }\n            }\n          }\n        }\n      },\n      on: {\n        LOGIN: '.pendingAuthorization'\n      }\n    },\n    gist: {\n      initial: 'checking',\n      states: {\n        checking: {\n          on: {\n            '': [{\n              target: 'fetching',\n              cond: function cond(ctx) {\n                return !!ctx.query.gist;\n              }\n            }, {\n              target: 'idle'\n            }]\n          }\n        },\n        idle: {},\n        fetching: {\n          invoke: {\n            src: invokeFetchGist,\n            onDone: {\n              target: 'loaded',\n              actions: assign({\n                // @ts-ignore\n                example: function example(_, e) {\n                  return e.data.files['machine.js'].content;\n                }\n              })\n            },\n            onError: {\n              target: 'idle',\n              actions: [assign({\n                gist: undefined\n              }), function (ctx) {\n                return notificationsActor.notify('Gist not found.');\n              }]\n            }\n          }\n        },\n        loaded: {\n          entry: function entry(ctx, e) {\n            return notificationsActor.notify('Gist loaded!');\n          }\n        }\n      }\n    }\n  }\n}, {\n  delays: {\n    AUTH_TIMEOUT: 15000\n  }\n});\nexport var AppContext = createContext({\n  state: appMachine.initialState,\n  send: function send() {},\n  service: {}\n});\n\nfunction layoutReducer(state, event) {\n  switch (state) {\n    case 'full':\n      switch (event) {\n        case 'TOGGLE':\n          return 'viz';\n\n        default:\n          return state;\n      }\n\n    case 'viz':\n      switch (event) {\n        case 'TOGGLE':\n          return 'full';\n\n        default:\n          return state;\n      }\n\n    default:\n      return state;\n  }\n}\n\nexport function App() {\n  var _a = useMachine(appMachine),\n      current = _a[0],\n      send = _a[1],\n      service = _a[2];\n\n  var _b = useReducer(layoutReducer, query.layout || 'full'),\n      layout = _b[0],\n      dispatchLayout = _b[1];\n\n  return React.createElement(StyledApp, {\n    \"data-layout\": layout\n  }, React.createElement(AppContext.Provider, {\n    value: {\n      state: current,\n      send: send,\n      service: service\n    }\n  }, React.createElement(User, null), React.createElement(Header, null), current.matches({\n    gist: 'fetching'\n  }) ? React.createElement(Loader, null) : React.createElement(React.Fragment, null, React.createElement(StateChart, {\n    machine: current.context.example,\n    onSave: function onSave(code) {\n      send('GIST.SAVE', {\n        code: code\n      });\n    }\n  }), React.createElement(LayoutButton, {\n    onClick: function onClick() {\n      return dispatchLayout('TOGGLE');\n    }\n  }, {\n    full: 'Hide',\n    viz: 'Code'\n  }[layout] || 'Show'))));\n}\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;","import React from 'react';\nexport var Logo = function Logo(_a) {\n  var className = _a.className;\n  return React.createElement(\"svg\", {\n    version: \"1.1\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 279.8 98.5\",\n    xmlSpace: \"preserve\",\n    className: className\n  }, React.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n    d: \"M55.8,10.4L55.8,10.4h19.5L55.6,44.6l0,0C49.6,33.9,49.7,20.9,55.8,10.4z\",\n    fill: \"var(--fill, black)\"\n  }), React.createElement(\"polygon\", {\n    points: \"75.4,88.1 30.5,10.4 11,10.4 33.4,49.3 11,88.1 30.5,88.1 43.2,66.2 55.8,88.1\",\n    fill: \"var(--fill, black)\"\n  })), React.createElement(\"g\", {\n    className: \"st0\"\n  }, React.createElement(\"path\", {\n    d: \"M89.1,59.8c3.2,2.7,6.9,4,11.3,4.1c5.2-0.1,7.8-2,7.9-5.7c0-3.1-1.7-4.9-5.2-5.5c-1.6-0.2-3.4-0.5-5.3-0.8\\n\\t\\t\\tc-3.4-0.6-6-1.9-7.8-3.9c-1.8-2.1-2.8-4.6-2.8-7.6c0-3.6,1.2-6.5,3.5-8.7c2.2-2.2,5.4-3.3,9.5-3.3c4.9,0.1,9.2,1.5,12.9,4.2\\n\\t\\t\\tl-3.4,5.1c-3-2-6.3-3.1-9.8-3.2c-1.9,0-3.4,0.5-4.6,1.4c-1.3,1-2,2.5-2,4.4c0,1.2,0.4,2.3,1.3,3.2c0.9,1,2.3,1.7,4.3,2\\n\\t\\t\\tc1.1,0.2,2.6,0.4,4.5,0.6c3.7,0.5,6.5,1.9,8.3,4.1c1.8,2.2,2.6,4.7,2.6,7.7C114,66,109.4,69.9,100.3,70c-5.9,0-10.9-1.9-15.2-5.6\\n\\t\\t\\tL89.1,59.8z\",\n    fill: \"var(--fill, black)\"\n  }), React.createElement(\"path\", {\n    d: \"M135.5,34.2h-10.9v-5.5h27.8v5.5h-10.9v35.5h-6V34.2z\",\n    fill: \"var(--fill, black)\"\n  }), React.createElement(\"path\", {\n    d: \"M180.9,60.5h-15.1l-3.1,9.2h-6.4l14.4-41h5l14.4,41H184L180.9,60.5z M179.2,55l-5.7-17.9h-0.1L167.6,55H179.2z\",\n    fill: \"var(--fill, black)\"\n  }), React.createElement(\"path\", {\n    d: \"M205.4,34.2h-10.9v-5.5h27.8v5.5h-10.9v35.5h-6V34.2z\",\n    fill: \"var(--fill, black)\"\n  }), React.createElement(\"path\", {\n    d: \"M234.2,28.7h25.4v5.8h-19.4v11.7h16.5v5.5h-16.5v12.1h19.4v5.8h-25.4V28.7z\",\n    fill: \"var(--fill, black)\"\n  }))));\n};","import React from 'react';\nimport { Notifications, notificationsMachine } from './Notifications';\nimport { StyledHeader, StyledLogo, StyledLinks, StyledLink } from './App';\nimport { interpret } from 'xstate';\nvar notificationsService = interpret(notificationsMachine).onTransition(function (s) {\n  return console.log(s);\n}).start();\nexport var notificationsActor = {\n  toJSON: function toJSON() {\n    return {\n      id: 'notifications'\n    };\n  },\n  id: 'notifications',\n  send: notificationsService.send.bind(notificationsService),\n  subscribe: notificationsService.subscribe.bind(notificationsService),\n  notify: function notify(message) {\n    return notificationsService.send({\n      type: 'NOTIFICATIONS.QUEUE',\n      data: typeof message === 'string' ? {\n        message: message,\n        severity: 'info'\n      } : message\n    });\n  }\n};\nexport function Header() {\n  return React.createElement(StyledHeader, null, React.createElement(Notifications, {\n    notifier: notificationsActor\n  }), React.createElement(StyledLogo, null), React.createElement(StyledLinks, null, React.createElement(StyledLink, {\n    href: \"https://github.com/davidkpiano/xstate\",\n    target: \"_xstate-github\"\n  }, \"GitHub\"), React.createElement(StyledLink, {\n    href: \"https://xstate.js.org/docs\",\n    target: \"_xstate-docs\"\n  }, \"Docs\"), React.createElement(StyledLink, {\n    href: \"https://spectrum.chat/statecharts\",\n    target: \"_statecharts-community\"\n  }, \"Community\")));\n}","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport React, { useEffect, useRef, useCallback } from 'react';\nimport { Machine, assign } from 'xstate';\nimport AceEditor from 'react-ace';\nimport { isBuiltInEvent } from './utils';\nimport styled from 'styled-components';\nimport { useMachine } from '@xstate/react';\nimport { StyledButton } from './Button';\nimport { format } from 'date-fns';\nimport { notificationsActor } from './Header';\n\nfunction getNextEvents(state) {\n  var nextEvents = state.nextEvents;\n  return nextEvents.filter(function (eventType) {\n    return !isBuiltInEvent(eventType);\n  });\n}\n\nvar StyledEventPanelEvents = styled.ul(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  list-style: none;\\n  padding: 0;\\n  overflow-y: scroll;\\n\"], [\"\\n  list-style: none;\\n  padding: 0;\\n  overflow-y: scroll;\\n\"])));\nvar StyledEventPanelEvent = styled.li(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  border-bottom: 1px solid #444;\\n\\n  > pre {\\n    margin: 0;\\n    flex-grow: 1;\\n  }\\n\\n  &[data-builtin] {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\\n  details {\\n    width: 100%;\\n  }\\n\\n  summary {\\n    width: 100%;\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-start;\\n    align-items: center;\\n    height: 2rem;\\n    padding: 0 0.5rem;\\n\\n    > :first-child {\\n      margin-right: auto;\\n      overflow: hidden;\\n      text-overflow: ellipsis;\\n      white-space: nowrap;\\n    }\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  border-bottom: 1px solid #444;\\n\\n  > pre {\\n    margin: 0;\\n    flex-grow: 1;\\n  }\\n\\n  &[data-builtin] {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\\n  details {\\n    width: 100%;\\n  }\\n\\n  summary {\\n    width: 100%;\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-start;\\n    align-items: center;\\n    height: 2rem;\\n    padding: 0 0.5rem;\\n\\n    > :first-child {\\n      margin-right: auto;\\n      overflow: hidden;\\n      text-overflow: ellipsis;\\n      white-space: nowrap;\\n    }\\n  }\\n\"])));\nvar StyledEventPanel = styled.section(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-template-rows: 1fr 10rem;\\n  grid-template-areas: 'events' 'editor';\\n  overflow: hidden;\\n\"], [\"\\n  display: grid;\\n  grid-template-rows: 1fr 10rem;\\n  grid-template-areas: 'events' 'editor';\\n  overflow: hidden;\\n\"])));\nvar StyledEventPanelButtons = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  margin-bottom: 0.5rem;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-content: flex-start;\\n  flex-wrap: wrap;\\n  overflow-y: auto;\\n\"], [\"\\n  margin-bottom: 0.5rem;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-content: flex-start;\\n  flex-wrap: wrap;\\n  overflow-y: auto;\\n\"])));\nvar StyledEventPanelButton = styled.button(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  appearance: none;\\n  margin-right: 0.5rem;\\n  margin-bottom: 0.5rem;\\n  background-color: var(--color-primary);\\n  border: none;\\n  color: white;\\n  padding: 0.25rem 0.5rem;\\n  border-radius: 2rem;\\n  font-size: 0.75em;\\n  font-weight: bold;\\n\"], [\"\\n  appearance: none;\\n  margin-right: 0.5rem;\\n  margin-bottom: 0.5rem;\\n  background-color: var(--color-primary);\\n  border: none;\\n  color: white;\\n  padding: 0.25rem 0.5rem;\\n  border-radius: 2rem;\\n  font-size: 0.75em;\\n  font-weight: bold;\\n\"])));\nvar StyledEventPanelEditor = styled.div(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-template-columns: 60% 40%;\\n  grid-template-rows: 1fr auto;\\n  grid-template-areas: 'code events' 'code send';\\n  padding: 1rem;\\n  border-top: 2px solid #444;\\n\\n  > \", \" {\\n    grid-area: send;\\n  }\\n\\n  > \", \" {\\n    grid-area events;\\n  }\\n\"], [\"\\n  display: grid;\\n  grid-template-columns: 60% 40%;\\n  grid-template-rows: 1fr auto;\\n  grid-template-areas: 'code events' 'code send';\\n  padding: 1rem;\\n  border-top: 2px solid #444;\\n\\n  > \", \" {\\n    grid-area: send;\\n  }\\n\\n  > \", \" {\\n    grid-area events;\\n  }\\n\"])), StyledButton, StyledEventPanelButtons);\nvar sendEventContext = {\n  eventCode: JSON.stringify({\n    type: ''\n  }, null, 2)\n};\nvar sendEventMachine = Machine({\n  id: 'sendEvent',\n  initial: 'idle',\n  context: sendEventContext,\n  states: {\n    idle: {\n      on: {\n        UPDATE: {\n          actions: assign({\n            eventCode: function eventCode(_, e) {\n              return e.value;\n            }\n          })\n        },\n        AUTOFILL: {\n          actions: [assign({\n            eventCode: function eventCode(_, e) {\n              return e.value;\n            }\n          }), 'moveCursor']\n        },\n        SEND: {\n          actions: 'sendToService'\n        }\n      }\n    }\n  }\n});\nexport var EventPanel = function EventPanel(_a) {\n  var records = _a.records,\n      state = _a.state,\n      service = _a.service;\n\n  var _b = useMachine(sendEventMachine, {\n    execute: false\n  }),\n      current = _b[0],\n      send = _b[1],\n      sendEventService = _b[2];\n\n  var editorRef = useRef(null);\n  var eventsRef = useRef(null);\n  useEffect(function () {\n    sendEventService.execute(current, {\n      moveCursor: function moveCursor() {\n        if (editorRef.current) {\n          editorRef.current.moveCursorTo(1);\n          editorRef.current.navigateLineEnd();\n          editorRef.current.focus();\n        }\n      }\n    });\n  }, [current, service]);\n  useEffect(function () {\n    if (eventsRef.current) {\n      eventsRef.current.scrollTop = eventsRef.current.scrollHeight;\n    }\n  }, [eventsRef.current, records.length]);\n  var sendToService = useCallback(function (eventJSON) {\n    var event;\n\n    try {\n      event = JSON.parse(eventJSON);\n    } catch (e) {\n      notificationsActor.notify({\n        message: 'Failed to send event',\n        description: e.message,\n        severity: 'error'\n      });\n      return;\n    }\n\n    if (!isBuiltInEvent(event.type)) {\n      service.send(event);\n    }\n  }, [service]);\n  return React.createElement(StyledEventPanel, null, React.createElement(StyledEventPanelEvents, {\n    ref: eventsRef\n  }, records.map(function (_a, i) {\n    var event = _a.event,\n        time = _a.time;\n    var pastEventCode = JSON.stringify(event, null, 2);\n    var isBuiltIn = isBuiltInEvent(event.type);\n    return React.createElement(StyledEventPanelEvent, {\n      key: i,\n      title: \"Double-click to send, click to edit\",\n      \"data-builtin\": isBuiltIn || undefined\n    }, React.createElement(\"details\", null, React.createElement(\"summary\", null, isBuiltIn ? React.createElement(\"em\", null, event.type) : React.createElement(React.Fragment, null, React.createElement(\"strong\", {\n      title: event.type\n    }, event.type), React.createElement(StyledButton, {\n      \"data-variant\": \"link\",\n      onClick: function onClick() {\n        sendToService(event);\n      }\n    }, \"Replay\"), React.createElement(StyledButton, {\n      \"data-variant\": \"link\",\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        send('AUTOFILL', {\n          value: pastEventCode\n        });\n      }\n    }, \"Edit\")), React.createElement(\"time\", null, format(time, 'hh:mm:ss.SS'))), React.createElement(\"pre\", null, isBuiltIn ? event.type : JSON.stringify(event, null, 2))));\n  })), React.createElement(StyledEventPanelEditor, null, React.createElement(StyledEventPanelButtons, null, getNextEvents(state).map(function (nextEvent) {\n    return React.createElement(StyledEventPanelButton, {\n      key: nextEvent,\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        send('AUTOFILL', {\n          value: JSON.stringify({\n            type: nextEvent\n          }, null, 2)\n        });\n      }\n    }, nextEvent);\n  })), React.createElement(AceEditor, {\n    ref: function ref(r) {\n      if (!r) {\n        return;\n      }\n\n      editorRef.current = r.editor;\n    },\n    mode: \"javascript\",\n    theme: \"monokai\",\n    editorProps: {\n      $blockScrolling: true\n    },\n    value: current.context.eventCode,\n    onChange: function onChange(value) {\n      send('UPDATE', {\n        value: value\n      });\n    },\n    setOptions: {\n      tabSize: 2,\n      fontSize: '12px'\n    },\n    width: \"100%\",\n    height: '5em',\n    showGutter: false,\n    readOnly: false,\n    cursorStart: 3\n  }), React.createElement(StyledButton, {\n    \"data-variant\": \"primary\",\n    \"data-size\": \"full\",\n    onClick: function onClick() {\n      return sendToService(current.context.eventCode);\n    }\n  }, \"Send\")));\n};\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nimport React, { useState, useContext } from 'react';\nimport AceEditor from 'react-ace';\nimport 'brace/theme/monokai';\nimport 'brace/mode/javascript';\nimport { StyledButton } from './Button';\nimport styled from 'styled-components';\nimport { AppContext } from './App';\nexport var StyledEditor = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  height: 100%;\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 1rem;\\n\"], [\"\\n  height: 100%;\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 1rem;\\n\"])));\nexport var StyledButtons = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n  grid-column-gap: 1rem;\\n\"], [\"\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n  grid-column-gap: 1rem;\\n\"])));\nexport var Editor = function Editor(props) {\n  var _a = useState(props.code),\n      code = _a[0],\n      setCode = _a[1];\n\n  var state = useContext(AppContext).state;\n  var onChange = props.onChange,\n      onSave = props.onSave,\n      _b = props.height,\n      height = _b === void 0 ? '100%' : _b,\n      _c = props.changeText,\n      changeText = _c === void 0 ? 'Update' : _c,\n      _d = props.mode,\n      mode = _d === void 0 ? 'javascript' : _d;\n  var isSaving = state.matches({\n    auth: {\n      authorized: {\n        gist: 'patching'\n      }\n    }\n  }) || state.matches({\n    auth: {\n      authorized: {\n        gist: 'posting'\n      }\n    }\n  });\n  return React.createElement(StyledEditor, null, React.createElement(AceEditor, {\n    mode: mode,\n    theme: \"monokai\",\n    editorProps: {\n      $blockScrolling: true\n    },\n    value: code,\n    onChange: function onChange(value) {\n      return setCode(value);\n    },\n    setOptions: {\n      tabSize: 2,\n      fontSize: '12px'\n    },\n    width: \"100%\",\n    height: height,\n    showGutter: false,\n    readOnly: !onChange,\n    wrapEnabled: true\n  }), React.createElement(StyledButtons, null, React.createElement(StyledButton, {\n    \"data-variant\": \"secondary\",\n    disabled: isSaving,\n    onClick: function onClick() {\n      return onChange(code);\n    }\n  }, changeText), React.createElement(StyledButton, {\n    \"data-variant\": \"primary\",\n    disabled: isSaving || state.matches({\n      auth: 'pendingAuthorization'\n    }),\n    onClick: function onClick() {\n      onChange(code);\n      onSave(code);\n    }\n  }, state.matches({\n    auth: {\n      authorized: {\n        gist: 'patching'\n      }\n    }\n  }) ? 'Saving...' : state.matches({\n    auth: {\n      authorized: {\n        gist: 'posting'\n      }\n    }\n  }) ? 'Uploading...' : state.matches({\n    auth: {\n      authorized: {\n        gist: {\n          idle: 'patched'\n        }\n      }\n    }\n  }) ? 'Saved!' : state.matches({\n    auth: {\n      authorized: {\n        gist: {\n          idle: 'posted'\n        }\n      }\n    }\n  }) ? 'Uploaded!' : state.matches({\n    auth: 'authorized'\n  }) ? 'Save' : state.matches({\n    auth: 'pendingAuthorization'\n  }) ? 'Logging in...' : 'Login + Save')));\n};\nvar templateObject_1, templateObject_2;","import React from 'react';\nimport { Editor } from './Editor';\nexport var CodePanel = function CodePanel(_a) {\n  var code = _a.code,\n      onChange = _a.onChange,\n      onSave = _a.onSave;\n  return React.createElement(Editor, {\n    code: code,\n    onChange: onChange,\n    onSave: onSave\n  });\n};","var __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport { Machine, assign, send, spawn, interpret } from 'xstate';\nimport * as XState from 'xstate';\nimport { StateChartContainer, StyledStateChartContainer } from './VizTabs';\nimport { StatePanel } from './StatePanel';\nimport { EventPanel } from './EventPanel';\nimport { CodePanel } from './CodePanel';\nimport { raise } from 'xstate/lib/actions';\nimport { getEdges } from 'xstate/lib/graph';\nimport { notificationsActor } from './Header';\nvar StyledViewTab = styled.li(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 0 1rem;\\n  border-bottom: 2px solid transparent;\\n  list-style: none;\\n  text-transform: uppercase;\\n  user-select: none;\\n  cursor: pointer;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\\n  &:not([data-active]):hover {\\n    border-color: var(--color-secondary-light);\\n  }\\n\\n  &[data-active] {\\n    border-color: var(--color-secondary);\\n  }\\n\"], [\"\\n  padding: 0 1rem;\\n  border-bottom: 2px solid transparent;\\n  list-style: none;\\n  text-transform: uppercase;\\n  user-select: none;\\n  cursor: pointer;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\\n  &:not([data-active]):hover {\\n    border-color: var(--color-secondary-light);\\n  }\\n\\n  &[data-active] {\\n    border-color: var(--color-secondary);\\n  }\\n\"])));\nvar StyledViewTabs = styled.ul(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: stretch;\\n  margin: 0;\\n  padding: 0;\\n  flex-grow: 0;\\n  flex-shrink: 0;\\n  position: sticky;\\n  top: 0;\\n\"], [\"\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: stretch;\\n  margin: 0;\\n  padding: 0;\\n  flex-grow: 0;\\n  flex-shrink: 0;\\n  position: sticky;\\n  top: 0;\\n\"])));\nvar StyledSidebar = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  background-color: var(--color-sidebar);\\n  color: white;\\n  overflow: hidden;\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  grid-template-rows: 2rem 1fr;\\n  border-top-left-radius: 1rem;\\n  box-shadow: var(--shadow);\\n  transition: transform 0.6s cubic-bezier(0.5, 0, 0.5, 1);\\n  z-index: 1;\\n\"], [\"\\n  background-color: var(--color-sidebar);\\n  color: white;\\n  overflow: hidden;\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  grid-template-rows: 2rem 1fr;\\n  border-top-left-radius: 1rem;\\n  box-shadow: var(--shadow);\\n  transition: transform 0.6s cubic-bezier(0.5, 0, 0.5, 1);\\n  z-index: 1;\\n\"])));\nexport var StyledStateChart = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  grid-area: content;\\n  display: grid;\\n  grid-template-columns: 1fr var(--sidebar-width, 25rem);\\n  grid-template-rows: 1fr;\\n  grid-template-areas: 'content sidebar';\\n  grid-column-gap: 1rem;\\n  font-family: sans-serif;\\n  font-size: 12px;\\n  overflow: hidden;\\n  max-height: inherit;\\n\\n  > \", \" {\\n    grid-area: sidebar;\\n  }\\n\\n  > \", \" {\\n    grid-area: content;\\n  }\\n\\n  > * {\\n    max-height: inherit;\\n    overflow-y: auto;\\n  }\\n\\n  [data-layout='viz'] & {\\n    > :not(\", \") {\\n      grid-column: 1 / -1;\\n    }\\n\\n    > \", \" {\\n      transform: translateX(100%);\\n    }\\n  }\\n\"], [\"\\n  grid-area: content;\\n  display: grid;\\n  grid-template-columns: 1fr var(--sidebar-width, 25rem);\\n  grid-template-rows: 1fr;\\n  grid-template-areas: 'content sidebar';\\n  grid-column-gap: 1rem;\\n  font-family: sans-serif;\\n  font-size: 12px;\\n  overflow: hidden;\\n  max-height: inherit;\\n\\n  > \", \" {\\n    grid-area: sidebar;\\n  }\\n\\n  > \", \" {\\n    grid-area: content;\\n  }\\n\\n  > * {\\n    max-height: inherit;\\n    overflow-y: auto;\\n  }\\n\\n  [data-layout='viz'] & {\\n    > :not(\", \") {\\n      grid-column: 1 / -1;\\n    }\\n\\n    > \", \" {\\n      transform: translateX(100%);\\n    }\\n  }\\n\"])), StyledSidebar, StyledStateChartContainer, StyledSidebar, StyledSidebar);\nexport function toMachine(machine) {\n  if (typeof machine !== 'string') {\n    return machine;\n  }\n\n  var createMachine;\n\n  try {\n    createMachine = new Function('Machine', 'interpret', 'assign', 'send', 'sendParent', 'spawn', 'raise', 'actions', 'XState', machine);\n  } catch (e) {\n    throw e;\n  }\n\n  var machines = [];\n\n  var machineProxy = function machineProxy(config, options) {\n    var machine = Machine(config, options);\n    machines.push(machine);\n    return machine;\n  };\n\n  createMachine(machineProxy, interpret, assign, send, XState.sendParent, spawn, raise, XState.actions, XState);\n  return machines[machines.length - 1];\n}\n\nvar StateChart =\n/** @class */\nfunction (_super) {\n  __extends(StateChart, _super);\n\n  function StateChart() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = function () {\n      var machine = toMachine(_this.props.machine);\n      return {\n        current: machine.initialState,\n        preview: undefined,\n        previewEvent: undefined,\n        view: 'definition',\n        machine: machine,\n        code: typeof _this.props.machine === 'string' ? _this.props.machine : \"Machine(\" + JSON.stringify(machine.config, null, 2) + \")\",\n        toggledStates: {},\n        service: interpret(machine, {}).onTransition(function (current) {\n          _this.handleTransition(current);\n        }),\n        events: []\n      };\n    }();\n\n    _this.svgRef = React.createRef();\n    return _this;\n  }\n\n  StateChart.prototype.handleTransition = function (state) {\n    var _this = this;\n\n    var formattedEvent = {\n      event: state.event,\n      time: Date.now()\n    };\n    this.setState({\n      current: state,\n      events: this.state.events.concat(formattedEvent)\n    }, function () {\n      if (_this.state.previewEvent) {// this.setState({\n        //   preview: this.state.service.nextState(this.state.previewEvent)\n        // });\n      }\n    });\n  };\n\n  StateChart.prototype.componentDidMount = function () {\n    this.state.service.start();\n  };\n\n  StateChart.prototype.componentDidUpdate = function (prevProps) {\n    var machine = this.props.machine;\n\n    if (machine !== prevProps.machine) {\n      this.updateMachine(machine.toString());\n    }\n  };\n\n  StateChart.prototype.renderView = function () {\n    var _this = this;\n\n    var _a = this.state,\n        view = _a.view,\n        current = _a.current,\n        machine = _a.machine,\n        code = _a.code,\n        service = _a.service,\n        events = _a.events;\n    var onSave = this.props.onSave;\n\n    switch (view) {\n      case 'definition':\n        return React.createElement(CodePanel, {\n          code: code,\n          onChange: function onChange(code) {\n            return _this.updateMachine(code);\n          },\n          onSave: onSave\n        });\n\n      case 'state':\n        return React.createElement(StatePanel, {\n          state: current,\n          service: service\n        });\n\n      case 'events':\n        return React.createElement(EventPanel, {\n          state: current,\n          service: service,\n          records: events\n        });\n\n      default:\n        return null;\n    }\n  };\n\n  StateChart.prototype.updateMachine = function (code) {\n    var machine;\n\n    try {\n      machine = toMachine(code);\n      getEdges(machine);\n    } catch (e) {\n      notificationsActor.notify({\n        message: 'Failed to update machine',\n        severity: 'error',\n        description: e.message\n      });\n      console.error(e);\n      return;\n    }\n\n    this.reset(code, machine);\n  };\n\n  StateChart.prototype.reset = function (code, machine) {\n    var _this = this;\n\n    if (code === void 0) {\n      code = this.state.code;\n    }\n\n    if (machine === void 0) {\n      machine = this.state.machine;\n    }\n\n    this.state.service.stop();\n    this.setState({\n      code: code,\n      machine: machine,\n      events: [],\n      current: machine.initialState\n    }, function () {\n      _this.setState({\n        service: interpret(_this.state.machine).onTransition(function (current) {\n          _this.handleTransition(current); // TODO: fix events\n          // this.setState({ current, events: [] }, () => {\n          //   if (this.state.previewEvent) {\n          //     this.setState({\n          //       preview: this.state.service.nextState(\n          //         this.state.previewEvent\n          //       )\n          //     });\n          //   }\n          // });\n\n        }).start()\n      }, function () {\n        console.log(_this.state.service);\n      });\n    });\n  };\n\n  StateChart.prototype.render = function () {\n    var _this = this;\n\n    var className = this.props.className;\n    var _a = this.state,\n        code = _a.code,\n        service = _a.service;\n    return React.createElement(StyledStateChart, {\n      className: className,\n      key: code,\n      style: {\n        background: 'var(--color-app-background)'\n      }\n    }, React.createElement(StateChartContainer, {\n      service: service,\n      onReset: function onReset() {\n        return _this.reset();\n      }\n    }), React.createElement(StyledSidebar, null, React.createElement(StyledViewTabs, null, ['definition', 'state', 'events'].map(function (view) {\n      return React.createElement(StyledViewTab, {\n        onClick: function onClick() {\n          return _this.setState({\n            view: view\n          });\n        },\n        key: view,\n        \"data-active\": _this.state.view === view || undefined\n      }, view);\n    })), this.renderView()));\n  };\n\n  return StateChart;\n}(React.Component);\n\nexport { StateChart };\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4;","import React, { Component, createContext, useState } from 'react';\nimport './App.css';\nimport { App } from '@statecharts/xstate-viz';\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport queryString from 'query-string';\n\nconst query = queryString.parse(window.location.search);\n\nif (query.code && window.opener) {\n  window.opener.authCallback(query.code);\n  setTimeout(() => window.close());\n} else {\n  ReactDOM.render(<App />, document.getElementById('root'));\n\n  // If you want your app to work offline and load faster, you can change\n  // unregister() to register() below. Note this comes with some pitfalls.\n  // Learn more about service workers: http://bit.ly/CRA-PWA\n  serviceWorker.unregister();\n}\n"],"sourceRoot":""}