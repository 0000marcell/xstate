(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{170:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),t._v(" "),a("ul",[t._m(5),t._v(" "),a("li",[a("code",[t._v("context")]),t._v(" - the current "),a("router-link",{attrs:{to:"./context.html"}},[t._v("context")]),t._v(" of this state")],1),t._v(" "),t._m(6),t._v(" "),a("li",[a("code",[t._v("actions")]),t._v(" - an array of "),a("router-link",{attrs:{to:"./actions.html"}},[t._v("actions")]),t._v(" to be executed")],1),t._v(" "),a("li",[a("code",[t._v("activities")]),t._v(" - a mapping of "),a("router-link",{attrs:{to:"./activities.html"}},[t._v("activities")]),t._v(" to "),a("code",[t._v("true")]),t._v(" if the activity started, or "),a("code",[t._v("false")]),t._v(" if stopped.")],1),t._v(" "),t._m(7),t._v(" "),a("li",[a("code",[t._v("meta")]),t._v(" - any static meta data defined on the "),a("code",[t._v("meta")]),t._v(" property of the "),a("router-link",{attrs:{to:"./statenodes.html"}},[t._v("state node")])],1)]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),a("p",[t._v("There are some helpful methods and getters that you can use for a better development experience:")]),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),a("p",[t._v("This getter specifies the next events that will cause a transition from the current state:")]),t._v(" "),t._m(14),a("p",[t._v("This is useful in determining which next events can be taken, and representing these potential events in the UI (such as enabling/disabling certain buttons).")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),a("p",[t._v("This is useful for representing the current state in string-based environments, such as in CSS classes or data-attributes.")]),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._m(26),t._v(" "),t._m(27),t._m(28),t._v(" "),t._m(29),a("p",[t._v("This will also maintain and restore previous "),a("router-link",{attrs:{to:"./history.html"}},[t._v("history states")]),t._v(".")],1),t._v(" "),t._m(30),t._v(" "),t._m(31)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"states"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#states","aria-hidden":"true"}},[this._v("#")]),this._v(" States")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("A state is an abstract representation of a system (such as an application) at a specific point in time. As an application is interacted with, events cause it to change state. A finite state machine can be in only one of a finite number of states at any given time. The current state of a machine is represented by a "),s("code",[this._v("State")]),this._v(" instance:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lightMachine "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Machine")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'light'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  initial"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'green'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  states"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    green"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lightMachine"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("initialState"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// State {")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//   value: 'green',")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//   actions: [],")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//   context: undefined,")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//   // ...")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lightMachine"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("transition")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'yellow'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'TIMER'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// State {")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//   value: { red: 'walk' },")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//   actions: [],")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//   context: undefined,")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//   // ...")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"state-definition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state-definition","aria-hidden":"true"}},[this._v("#")]),this._v(" State Definition")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("A "),s("code",[this._v("State")]),this._v(" object instance is JSON-serializable and has the following properties:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("value")]),this._v(" - the current state value (e.g., "),s("code",[this._v("{red: 'walk'}")]),this._v(")")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("event")]),this._v(" - the event object that triggered the transition to this state (since 4.2.1)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("history")]),this._v(" - the previous "),s("code",[this._v("State")]),this._v(" instance")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("It contains other properties such as "),s("code",[this._v("historyValue")]),this._v(", "),s("code",[this._v("events")]),this._v(", "),s("code",[this._v("tree")]),this._v(", and others that are generally not relevant and are used internally.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"state-methods-and-getters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state-methods-and-getters","aria-hidden":"true"}},[this._v("#")]),this._v(" State Methods and Getters")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"state-matches-parentstatevalue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state-matches-parentstatevalue","aria-hidden":"true"}},[this._v("#")]),this._v(" "),s("code",[this._v("state.matches(parentStateValue)")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("This method determines whether the current "),a("code",[t._v("state.value")]),t._v(" is a subset of the given "),a("code",[t._v("parentStateValue")]),t._v('; that is, if it "matches" the state value. For example, assuming the current '),a("code",[t._v("state.value")]),t._v(" is "),a("code",[t._v("{ red: 'stop' }")]),t._v(":")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => { red: 'stop' }")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("matches")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'red'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => true")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("matches")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'red.stop'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => true")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("matches")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" red"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'stop'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => true")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("matches")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'green'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => false")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"state-nextevents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state-nextevents","aria-hidden":"true"}},[this._v("#")]),this._v(" "),s("code",[this._v("state.nextEvents")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" initialState "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" lightMachine"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextEvents"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => ['TIMER', 'EMERGENCY']")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"state-changed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state-changed","aria-hidden":"true"}},[this._v("#")]),this._v(" "),s("code",[this._v("state.changed")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("This getter specifies if this "),s("code",[this._v("state")]),this._v(' has changed from the previous state. A state is considered "changed" if:')])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Its value is not equal to its previous value, or:")]),this._v(" "),s("li",[this._v("It has any new actions (side-effects) to execute.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("An initial state (with no history) will return "),s("code",[this._v("undefined")]),this._v(".")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" initialState "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" lightMachine"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("changed"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => undefined")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextState "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" lightMachine"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("transition")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'TIMER'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextState"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("changed"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => true")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" unchangedState "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" lightMachine"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("transition")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextState"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'UNKNOWN_EVENT'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("unchangedState"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("changed"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => false")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"state-tostrings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state-tostrings","aria-hidden":"true"}},[this._v("#")]),this._v(" "),s("code",[this._v("state.toStrings()")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("This method returns an array of strings that represent "),s("em",[this._v("all")]),this._v(" of the state value paths. For example, assuming the current "),s("code",[this._v("state.value")]),this._v(" is "),s("code",[this._v("{ red: 'stop' }")]),this._v(":")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => { red: 'stop' }")]),t._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("toStrings")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// => ['red', 'red.stop']")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"persisting-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#persisting-state","aria-hidden":"true"}},[this._v("#")]),this._v(" Persisting State")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("As mentioned, a "),s("code",[this._v("State")]),this._v(" object can be persisted by serializing it to a string JSON format:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" jsonState "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stringify")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentState"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// Example: persisting to localStorage")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  localStorage"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'app-state'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" jsonState"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token class-name"}},[t._v("e")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// unable to save to localStorage")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("State can be rehydrated (i.e., restored) using the static "),s("code",[this._v("State.create(...)")]),this._v(" method:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" State "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'xstate'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" interpret "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'xstate/lib/interpreter'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" myMachine "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'../path/to/myMachine'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// Retrieving state from localStorage")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" restoredStateDef "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("parse")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("localStorage"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("get")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'app-state'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// Use State.create() to restore state from a plain object")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" restoredState "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" State"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("create")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("restoredStateDef"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("You can then interpret the machine from this restored state by passing the "),s("code",[this._v("State")]),this._v(" into the "),s("code",[this._v(".start(...)")]),this._v(" method of the interpreted service:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// This will start the service at the specified State")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" service "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("interpret")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myMachine"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("start")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("restoredState"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"notes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#notes","aria-hidden":"true"}},[this._v("#")]),this._v(" Notes")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("You should seldom (never) have to create a "),a("code",[t._v("State")]),t._v(" instance manually. Treat "),a("code",[t._v("State")]),t._v(" as a read-only object that comes from "),a("code",[t._v("machine.transition(...)")]),t._v(" or "),a("code",[t._v("service.onTransition(...)")]),t._v(" "),a("em",[t._v("only")]),t._v(".")]),t._v(" "),a("li",[t._v("To prevent memory leaks, "),a("code",[t._v("state.history")]),t._v(" will not retain its history; that is, "),a("code",[t._v("state.history.history === undefined")]),t._v(". Otherwise, we're creating a huge linked list and reinventing blockchain, which I really don't care to do.\n"),a("ul",[a("li",[t._v("This behavior may be configurable in future versions.")])])])])}],!1,null,null,null);e.options.__file="states.md";s.default=e.exports}}]);