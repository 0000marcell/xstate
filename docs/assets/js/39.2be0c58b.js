(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{244:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",{attrs:{align:"center"}},[n("a",{attrs:{href:"https://xstate.js.org"}},[n("br"),t._v(" "),n("img",{attrs:{src:"https://i.imgur.com/j4x2zzX.png",alt:"XState FSM",width:"200"}}),t._v(" "),n("br"),t._v(" "),n("sub",[n("strong",[t._v("XState for Finite State Machines")])]),t._v(" "),n("br"),t._v(" "),n("br")])]),t._v(" "),n("p",[t._v("This package contains a minimal, 1kb implementation of "),n("a",{attrs:{href:"https://github.com/davidkpiano/xstate",target:"_blank",rel:"noopener noreferrer"}},[t._v("XState"),n("OutboundLink")],1),t._v(" for "),n("strong",[t._v("finite state machines")]),t._v(".")]),t._v(" "),n("p",[n("strong",[t._v("Features:")])]),t._v(" "),n("ul",[n("li",[t._v("Finite states (non-nested)")]),t._v(" "),n("li",[t._v("Initial state")]),t._v(" "),n("li",[t._v("Transitions (object or strings)")]),t._v(" "),n("li",[t._v("Context")]),t._v(" "),n("li",[t._v("Entry actions")]),t._v(" "),n("li",[t._v("Exit actions")]),t._v(" "),n("li",[t._v("Transition actions")]),t._v(" "),n("li",[n("code",[t._v("state.changed")])])]),t._v(" "),n("p",[t._v("If you want to use statechart features such as nested states, parallel states, history states, activities, invoked services, delayed transitions, transient transitions, etc. please use "),n("a",{attrs:{href:"https://github.com/davidkpiano/xstate",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("XState")]),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("h2",{attrs:{id:"super-quick-start"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#super-quick-start"}},[t._v("#")]),t._v(" Super quick start")]),t._v(" "),n("p",[n("strong",[t._v("Installation")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i @xstate/fsm\n")])])]),n("p",[n("strong",[t._v("Usage (machine):")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createMachine "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@xstate/fsm'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Stateless finite state machine definition")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// machine.transition(...) is a pure function.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" toggleMachine "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createMachine")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'toggle'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  initial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'inactive'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  states"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    inactive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TOGGLE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'active'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    active"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TOGGLE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'inactive'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" initialState "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" toggleMachine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" toggledState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" toggleMachine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TOGGLE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntoggledState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 'active'")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" untoggledState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" toggleMachine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("toggledState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TOGGLE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nuntoggledState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 'inactive'")]),t._v("\n")])])]),n("p",[n("strong",[t._v("Usage (service):")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createMachine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" interpret "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@xstate/fsm'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" toggleMachine "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createMachine")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" toggleService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("interpret")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("toggleMachine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ntoggleService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ntoggleService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TOGGLE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => logs 'active'")]),t._v("\n\ntoggleService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TOGGLE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => logs 'inactive'")]),t._v("\n\ntoggleService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#super-quick-start"}},[t._v("Super quick start")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#api"}},[t._v("API")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#createmachineconfig"}},[n("code",[t._v("createMachine(config)")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#machine-config"}},[t._v("Machine config")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#state-config"}},[t._v("State config")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#transition-config"}},[t._v("Transition config")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#action-config"}},[t._v("Action config")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#machineinitialstate"}},[n("code",[t._v("machine.initialState")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#machinetransitionstate-event"}},[n("code",[t._v("machine.transition(state, event)")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#state"}},[t._v("State")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#interpretmachine"}},[n("code",[t._v("interpret(machine)")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#servicesubscribestatelistener"}},[n("code",[t._v("service.subscribe(stateListener)")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#servicesendevent"}},[n("code",[t._v("service.send(event)")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#servicestart"}},[n("code",[t._v("service.start()")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#servicestop"}},[n("code",[t._v("service.stop()")])])])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#typescript"}},[t._v("TypeScript")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#example"}},[t._v("Example")])])]),t._v(" "),n("h2",{attrs:{id:"api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),n("h3",{attrs:{id:"createmachine-config"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#createmachine-config"}},[t._v("#")]),t._v(" "),n("code",[t._v("createMachine(config)")])]),t._v(" "),n("p",[t._v("Creates a new finite state machine from the config.")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("Argument")]),t._v(" "),n("th",[t._v("Type")]),t._v(" "),n("th",[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("config")])]),t._v(" "),n("td",[t._v("object (see below)")]),t._v(" "),n("td",[t._v("The config object for creating the machine.")])])])]),t._v(" "),n("p",[n("strong",[t._v("Returns:")])]),t._v(" "),n("p",[t._v("A "),n("code",[t._v("Machine")]),t._v(", which provides:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("machine.initialState")]),t._v(": the machine's resolved initial state")]),t._v(" "),n("li",[n("code",[t._v("machine.transition(state, event)")]),t._v(": a pure transition function that returns the next state given the current "),n("code",[t._v("state")]),t._v(" and "),n("code",[t._v("event")])])]),t._v(" "),n("p",[t._v("The machine config has this schema:")]),t._v(" "),n("h3",{attrs:{id:"machine-config"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#machine-config"}},[t._v("#")]),t._v(" Machine config")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("id")]),t._v(" (string) - an identifier for the type of machine this is. Useful for debugging.")]),t._v(" "),n("li",[n("code",[t._v("initial")]),t._v(" (string) - the key of the initial state.")]),t._v(" "),n("li",[n("code",[t._v("states")]),t._v(" (object) - an object mapping state names (keys) to "),n("a",{attrs:{href:"#state-config"}},[t._v("states")])])]),t._v(" "),n("h3",{attrs:{id:"state-config"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#state-config"}},[t._v("#")]),t._v(" State config")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("on")]),t._v(" (object) - an object mapping event types (keys) to "),n("a",{attrs:{href:"#transition-config"}},[t._v("transitions")])])]),t._v(" "),n("h3",{attrs:{id:"transition-config"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transition-config"}},[t._v("#")]),t._v(" Transition config")]),t._v(" "),n("p",[t._v("String syntax:")]),t._v(" "),n("ul",[n("li",[t._v("(string) - the state name to transition to.\n"),n("ul",[n("li",[t._v("Same as "),n("code",[t._v("{ target: stateName }")])])])])]),t._v(" "),n("p",[t._v("Object syntax:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("target?")]),t._v(" (string) - the state name to transition to.")]),t._v(" "),n("li",[n("code",[t._v("actions?")]),t._v(" (Action | Action[]) - the "),n("a",{attrs:{href:"#action-config"}},[t._v("action(s)")]),t._v(" to execute when this transition is taken.")]),t._v(" "),n("li",[n("code",[t._v("cond?")]),t._v(" (Guard) - the condition (predicate function) to test. If it returns "),n("code",[t._v("true")]),t._v(", the transition will be taken.")])]),t._v(" "),n("h3",{attrs:{id:"action-config"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#action-config"}},[t._v("#")]),t._v(" Action config")]),t._v(" "),n("p",[t._v("String syntax:")]),t._v(" "),n("ul",[n("li",[t._v("(string) - the action type.\n"),n("ul",[n("li",[t._v("Resolves to "),n("code",[t._v("{ type: actionType, exec: undefined }")])])])])]),t._v(" "),n("p",[t._v("Function syntax:")]),t._v(" "),n("ul",[n("li",[t._v("(function) - the action function to execute. Resolves to "),n("code",[t._v("{ type: actionFn.name, exec: actionFn }")]),t._v(" and the function takes the following arguments:\n"),n("ol",[n("li",[n("code",[t._v("context")]),t._v(" (any) - the machine's current "),n("code",[t._v("context")]),t._v(".")]),t._v(" "),n("li",[n("code",[t._v("event")]),t._v(" (object) - the event that caused the action to be executed.")])])])]),t._v(" "),n("p",[t._v("Object syntax:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("type")]),t._v(" (string) - the action type.")]),t._v(" "),n("li",[n("code",[t._v("exec?")]),t._v(" (function) - the action function to execute.")])]),t._v(" "),n("h3",{attrs:{id:"machine-initialstate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#machine-initialstate"}},[t._v("#")]),t._v(" "),n("code",[t._v("machine.initialState")])]),t._v(" "),n("p",[t._v("The resolved initial state of the "),n("code",[t._v("machine")]),t._v(".")]),t._v(" "),n("h3",{attrs:{id:"machine-transition-state-event"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#machine-transition-state-event"}},[t._v("#")]),t._v(" "),n("code",[t._v("machine.transition(state, event)")])]),t._v(" "),n("p",[t._v("A pure transition function that returns the next state given the current "),n("code",[t._v("state")]),t._v(" and "),n("code",[t._v("event")]),t._v(".")]),t._v(" "),n("p",[t._v("The state can be a "),n("code",[t._v("string")]),t._v(" state name, or a "),n("code",[t._v("State")]),t._v(" object (the return type of "),n("code",[t._v("machine.transition(...)")]),t._v(").")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("Argument")]),t._v(" "),n("th",[t._v("Type")]),t._v(" "),n("th",[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("state")])]),t._v(" "),n("td",[n("code",[t._v("string")]),t._v(" or "),n("code",[t._v("State")]),t._v(" object")]),t._v(" "),n("td",[t._v("The current state to transition from")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("event")])]),t._v(" "),n("td",[n("code",[t._v("string")]),t._v(" or "),n("code",[t._v("{ type: string, ... }")])]),t._v(" "),n("td",[t._v("The event that transitions the current "),n("code",[t._v("state")]),t._v(" to the next state")])])])]),t._v(" "),n("p",[n("strong",[t._v("Returns:")])]),t._v(" "),n("p",[t._v("A "),n("code",[t._v("State")]),t._v(" object, which represents the next state.")]),t._v(" "),n("p",[n("strong",[t._v("Example:")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string state name and")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" yellowState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" machine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'green'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TIMER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { value: 'yellow', ... }")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" redState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" machine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("yellowState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TIMER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { value: 'red', ... }")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" greenState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" machine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("yellowState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TIMER'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { value: 'green', ... }")]),t._v("\n")])])]),n("h3",{attrs:{id:"state"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#state"}},[t._v("#")]),t._v(" State")]),t._v(" "),n("p",[t._v("An object that represents the state of a machine with the following schema:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("value")]),t._v(" (string) - the finite state value")]),t._v(" "),n("li",[n("code",[t._v("context")]),t._v(" (object) - the extended state (context)")]),t._v(" "),n("li",[n("code",[t._v("actions")]),t._v(" (array) - an array of action objects representing the side-effects (actions) to be executed")]),t._v(" "),n("li",[n("code",[t._v("changed")]),t._v(" (boolean) - whether this state is changed from the previous state ("),n("code",[t._v("true")]),t._v(" if the "),n("code",[t._v("state.value")]),t._v(" and "),n("code",[t._v("state.context")]),t._v(" are the same, and there are no side-effects)")]),t._v(" "),n("li",[n("code",[t._v("matches(value)")]),t._v(" (boolean) - whether this state's value matches (i.e., is equal to) the "),n("code",[t._v("value")]),t._v(". This is useful for typestate checking.")])]),t._v(" "),n("h3",{attrs:{id:"interpret-machine"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#interpret-machine"}},[t._v("#")]),t._v(" "),n("code",[t._v("interpret(machine)")])]),t._v(" "),n("p",[t._v("Creates an instance of an interpreted machine, also known as a "),n("strong",[t._v("service")]),t._v(". This is a stateful representation of the running machine, which you can subscribe to, send events to, start, and stop.")]),t._v(" "),n("p",[t._v("Actions will also be executed by the interpreter.")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("Argument")]),t._v(" "),n("th",[t._v("Type")]),t._v(" "),n("th",[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("machine")])]),t._v(" "),n("td",[t._v("StateMachine")]),t._v(" "),n("td",[t._v("The machine to be interpreted.")])])])]),t._v(" "),n("p",[n("strong",[t._v("Example:")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createMachine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" interpret "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@xstate/fsm'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" machine "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createMachine")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" service "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("interpret")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("machine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" subscription "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nservice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nservice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SOME_EVENT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nservice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ANOTHER_EVENT'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// unsubscribes single subscription")]),t._v("\nsubscription"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// unsubscribes all subscriptions and stops interpretation")]),t._v("\nservice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"service-subscribe-statelistener"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#service-subscribe-statelistener"}},[t._v("#")]),t._v(" "),n("code",[t._v("service.subscribe(stateListener)")])]),t._v(" "),n("p",[t._v("A service (created from "),n("code",[t._v("interpret(machine)")]),t._v(") can be subscribed to via the "),n("code",[t._v(".subscribe(...)")]),t._v(" method. The subscription will be notified of all state changes (including the initial state) and can be unsubscribed.")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("Argument")]),t._v(" "),n("th",[t._v("Type")]),t._v(" "),n("th",[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("stateListener")])]),t._v(" "),n("td",[n("code",[t._v("(state) => void")])]),t._v(" "),n("td",[t._v("The listener that is called with the interpreted machine's current "),n("code",[t._v("state")]),t._v(" whenever it changes.")])])])]),t._v(" "),n("p",[n("strong",[t._v("Returns:")])]),t._v(" "),n("p",[t._v("A subscription object with an "),n("code",[t._v("unsubscribe")]),t._v(" method.")]),t._v(" "),n("h3",{attrs:{id:"service-send-event"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#service-send-event"}},[t._v("#")]),t._v(" "),n("code",[t._v("service.send(event)")])]),t._v(" "),n("p",[t._v("Sends an "),n("code",[t._v("event")]),t._v(" to the interpreted machine. The event can be a string (e.g., "),n("code",[t._v('"EVENT"')]),t._v(") or an object with a "),n("code",[t._v("type")]),t._v(" property (e.g., "),n("code",[t._v('{ type: "EVENT" }')]),t._v(").")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("Argument")]),t._v(" "),n("th",[t._v("Type")]),t._v(" "),n("th",[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("event")])]),t._v(" "),n("td",[n("code",[t._v("string")]),t._v(" or "),n("code",[t._v("{ type: string, ... }")])]),t._v(" "),n("td",[t._v("The event to be sent to the interpreted machine.")])])])]),t._v(" "),n("h3",{attrs:{id:"service-start"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#service-start"}},[t._v("#")]),t._v(" "),n("code",[t._v("service.start()")])]),t._v(" "),n("p",[t._v("Starts the interpreted machine.")]),t._v(" "),n("p",[t._v("Events sent to the interpreted machine will not trigger any transitions until the service is started. All listeners (via "),n("code",[t._v("service.subscribe(listener)")]),t._v(") will receive the "),n("code",[t._v("machine.initialState")]),t._v(".")]),t._v(" "),n("h3",{attrs:{id:"service-stop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#service-stop"}},[t._v("#")]),t._v(" "),n("code",[t._v("service.stop()")])]),t._v(" "),n("p",[t._v("Stops the interpreted machine.")]),t._v(" "),n("p",[t._v("Events sent to a stopped service will no longer trigger any transitions. All listeners (via "),n("code",[t._v("service.subscribe(listener)")]),t._v(") will be unsubscribed.")]),t._v(" "),n("h2",{attrs:{id:"typescript"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#typescript"}},[t._v("#")]),t._v(" TypeScript")]),t._v(" "),n("p",[t._v("A machine can be strictly typed by passing in 3 generic types:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("TContext")]),t._v(" - the machine's "),n("code",[t._v("context")])]),t._v(" "),n("li",[n("code",[t._v("TEvent")]),t._v(" - all events that the machine accepts")]),t._v(" "),n("li",[n("code",[t._v("TState")]),t._v(" - all states that the machine can be in")])]),t._v(" "),n("p",[t._v("The "),n("code",[t._v("TContext")]),t._v(" type should be an "),n("code",[t._v("object")]),t._v(" that represents all possible combined types of "),n("code",[t._v("state.context")]),t._v(".")]),t._v(" "),n("p",[t._v("The "),n("code",[t._v("TEvent")]),t._v(" type should be the union of all event objects that the machine can accept, where each event object has a "),n("code",[t._v("{ type: string }")]),t._v(" property, as well as any other properties that may be present.")]),t._v(" "),n("p",[t._v("The "),n("code",[t._v("TState")]),t._v(" type should be the union of all typestates (value and contexts) that the machine can be in, where each typestate has:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("value")]),t._v(" (string) - the value (name) of the state")]),t._v(" "),n("li",[n("code",[t._v("context")]),t._v(" (object) - an object that extends "),n("code",[t._v("TContext")]),t._v(" and narrows the shape of the context to what it should be in this state.")])]),t._v(" "),n("p",[n("strong",[t._v("Example:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserContext")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  user"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" User"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  error"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" UserEvent "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FETCH'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'RESOLVE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" User "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'REJECT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" UserState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'idle'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" UserContext "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" undefined"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" undefined"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'loading'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" UserContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" UserContext "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" User"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" undefined "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'failure'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" UserContext "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" undefined"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userMachine "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" createMachine"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("UserContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" UserEvent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" UserState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("interpret")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userMachine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nuserService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("matches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// from UserState, `user` will be defined")]),t._v("\n    state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"example"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createMachine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" assign "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@xstate/fsm'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lightMachine "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createMachine")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'light'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  initial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'green'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" redLights"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  states"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    green"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TIMER")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yellow'")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    yellow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TIMER")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("actions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Going to red!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    red"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      entry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("redLights")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redLights "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TIMER")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'green'")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lightService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("interpret")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lightMachine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nlightService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nlightService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => logs {")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   value: 'green',")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   context: { redLights: 0 },")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   actions: [],")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   changed: undefined")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n\nlightService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TIMER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => logs {")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   value: 'yellow',")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   context: { redLights: 0 },")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   actions: [")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     { type: undefined, exec: () => console.log('Going to red!') }")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   ],")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   changed: true")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n\nlightService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TIMER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => logs {")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   value: 'red',")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   context: { redLights: 1 },")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   actions: [],")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   changed: true")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);