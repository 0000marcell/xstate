(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{155:function(e,a,n){"use strict";n.r(a),n.d(a,"_frontmatter",function(){return p});var t=n(167),s=n.n(t),c=n(0),o=n.n(c),m=n(168),l=n(169);a.default=function(e){var a=e.components,n=s()(e,["components"]);return o.a.createElement(m.MDXTag,{name:"wrapper",Layout:l.a,layoutProps:n,components:a},o.a.createElement(m.MDXTag,{name:"h1",components:a,props:{id:"history-state-nodes"}},o.a.createElement(m.MDXTag,{name:"a",components:a,parentName:"h1",props:{href:"#history-state-nodes","aria-hidden":!0,class:"anchor"}}),"History State Nodes"),o.a.createElement(m.MDXTag,{name:"p",components:a},"A history state node is a special kind of state node that, when reached, tells the machine to go to the last state value of that region. There's two types of history states:"),o.a.createElement(m.MDXTag,{name:"ul",components:a},o.a.createElement(m.MDXTag,{name:"li",components:a,parentName:"ul"},o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"'shallow'"),", which specifies only the top-level history value, or"),o.a.createElement(m.MDXTag,{name:"li",components:a,parentName:"ul"},o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"'deep'"),", which specifies the top-level and all child-level history values.")),o.a.createElement(m.MDXTag,{name:"h2",components:a,props:{id:"history-state-configuration"}},o.a.createElement(m.MDXTag,{name:"a",components:a,parentName:"h2",props:{href:"#history-state-configuration","aria-hidden":!0,class:"anchor"}}),"History State Configuration"),o.a.createElement(m.MDXTag,{name:"p",components:a},"The configuration for a history state is the same as an atomic state node, with some extra properties:"),o.a.createElement(m.MDXTag,{name:"ul",components:a},o.a.createElement(m.MDXTag,{name:"li",components:a,parentName:"ul"},o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"type: 'history'")," to specify that this is a history state node"),o.a.createElement(m.MDXTag,{name:"li",components:a,parentName:"ul"},o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"history")," ('shallow' | 'deep') - whether the history is shallow or deep. Defaults to 'shallow'."),o.a.createElement(m.MDXTag,{name:"li",components:a,parentName:"ul"},o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"target")," (StateValue) - the default target if no history exists. Defaults to the initial state value of the parent node.")),o.a.createElement(m.MDXTag,{name:"p",components:a},"Consider the following (contrived) statechart:"),o.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},o.a.createElement("pre",{className:"language-js"},o.a.createElement("code",{className:"language-js"},o.a.createElement("span",{className:"token keyword"},"const")," fanMachine ",o.a.createElement("span",{className:"token operator"},"=")," ",o.a.createElement("span",{className:"token function"},"Machine"),o.a.createElement("span",{className:"token punctuation"},"("),o.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","id",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'fan'"),o.a.createElement("span",{className:"token punctuation"},","),"\n","  ","initial",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'fanOff'"),o.a.createElement("span",{className:"token punctuation"},","),"\n","  ","states",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","fanOff",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","on",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",o.a.createElement("span",{className:"token comment"},"// transitions to history state"),"\n","        ",o.a.createElement("span",{className:"token constant"},"POWER"),o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'fanOn.hist'"),o.a.createElement("span",{className:"token punctuation"},","),"\n","        ",o.a.createElement("span",{className:"token constant"},"HIGH_POWER"),o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'fanOn.highPowerHist'"),"\n","      ",o.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",o.a.createElement("span",{className:"token punctuation"},"}"),o.a.createElement("span",{className:"token punctuation"},","),"\n","    ","fanOn",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ","initial",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'first'"),o.a.createElement("span",{className:"token punctuation"},","),"\n","      ","states",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ","first",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","on",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{")," ",o.a.createElement("span",{className:"token constant"},"SWITCH"),o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'second'")," ",o.a.createElement("span",{className:"token punctuation"},"}"),"\n","        ",o.a.createElement("span",{className:"token punctuation"},"}"),o.a.createElement("span",{className:"token punctuation"},","),"\n","        ","second",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","on",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{")," ",o.a.createElement("span",{className:"token constant"},"SWITCH"),o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'third'")," ",o.a.createElement("span",{className:"token punctuation"},"}"),"\n","        ",o.a.createElement("span",{className:"token punctuation"},"}"),o.a.createElement("span",{className:"token punctuation"},","),"\n","        ","third",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),o.a.createElement("span",{className:"token punctuation"},"}"),o.a.createElement("span",{className:"token punctuation"},","),"\n","\n","        ",o.a.createElement("span",{className:"token comment"},"// shallow history state"),"\n","        ","hist",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","type",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'history'"),o.a.createElement("span",{className:"token punctuation"},","),"\n","          ","history",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'shallow'")," ",o.a.createElement("span",{className:"token comment"},"// optional; default is 'shallow'"),"\n","        ",o.a.createElement("span",{className:"token punctuation"},"}"),o.a.createElement("span",{className:"token punctuation"},","),"\n","\n","        ",o.a.createElement("span",{className:"token comment"},"// shallow history state with default"),"\n","        ","highPowerHist",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","type",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'history'"),o.a.createElement("span",{className:"token punctuation"},","),"\n","          ","target",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'third'"),"\n","        ",o.a.createElement("span",{className:"token punctuation"},"}"),"\n","      ",o.a.createElement("span",{className:"token punctuation"},"}"),o.a.createElement("span",{className:"token punctuation"},","),"\n","      ","on",o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",o.a.createElement("span",{className:"token constant"},"POWER"),o.a.createElement("span",{className:"token punctuation"},":")," ",o.a.createElement("span",{className:"token string"},"'fanOff'"),"\n","      ",o.a.createElement("span",{className:"token punctuation"},"}"),"\n","    ",o.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",o.a.createElement("span",{className:"token punctuation"},"}"),"\n",o.a.createElement("span",{className:"token punctuation"},"}"),o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";")))),o.a.createElement(m.MDXTag,{name:"p",components:a},"In the above machine, the transition from ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'fanOff'")," on the event ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'POWER'")," goes to the ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'fanOn.hist'")," state, which is defined as a shallow history state. This means that the machine should transition to the ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'fanOn'")," state and to whichever the previous substate of ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'fanOn'")," was. By default, ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'fanOn'")," will go to its initial state, ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"'first'"),", if there is no history state."),o.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},o.a.createElement("pre",{className:"language-js"},o.a.createElement("code",{className:"language-js"},o.a.createElement("span",{className:"token keyword"},"const")," firstState ",o.a.createElement("span",{className:"token operator"},"=")," fanMachine",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"transition"),o.a.createElement("span",{className:"token punctuation"},"("),"fanMachine",o.a.createElement("span",{className:"token punctuation"},"."),"initialState",o.a.createElement("span",{className:"token punctuation"},",")," ",o.a.createElement("span",{className:"token string"},"'POWER'"),o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n","console",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"log"),o.a.createElement("span",{className:"token punctuation"},"("),"firstState",o.a.createElement("span",{className:"token punctuation"},"."),"value",o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n",o.a.createElement("span",{className:"token comment"},"// transitions to the initial state of 'fanOn' since there is no history"),"\n",o.a.createElement("span",{className:"token comment"},"// => ","{"),"\n",o.a.createElement("span",{className:"token comment"},"//","   ","fanOn: 'first'"),"\n",o.a.createElement("span",{className:"token comment"},"// ","}"),"\n","\n",o.a.createElement("span",{className:"token keyword"},"const")," secondState ",o.a.createElement("span",{className:"token operator"},"=")," fanMachine",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"transition"),o.a.createElement("span",{className:"token punctuation"},"("),"firstState",o.a.createElement("span",{className:"token punctuation"},",")," ",o.a.createElement("span",{className:"token string"},"'SWITCH'"),o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n","console",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"log"),o.a.createElement("span",{className:"token punctuation"},"("),"secondState",o.a.createElement("span",{className:"token punctuation"},"."),"value",o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n",o.a.createElement("span",{className:"token comment"},"// => ","{"),"\n",o.a.createElement("span",{className:"token comment"},"//","   ","fanOn: 'second'"),"\n",o.a.createElement("span",{className:"token comment"},"// ","}"),"\n","\n",o.a.createElement("span",{className:"token keyword"},"const")," thirdState ",o.a.createElement("span",{className:"token operator"},"=")," fanMachine",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"transition"),o.a.createElement("span",{className:"token punctuation"},"("),"secondState",o.a.createElement("span",{className:"token punctuation"},",")," ",o.a.createElement("span",{className:"token string"},"'POWER'"),o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n","console",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"log"),o.a.createElement("span",{className:"token punctuation"},"("),"thirdState",o.a.createElement("span",{className:"token punctuation"},"."),"value",o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n",o.a.createElement("span",{className:"token comment"},"// => 'fanOff'"),"\n","\n","console",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"log"),o.a.createElement("span",{className:"token punctuation"},"("),"thirdState",o.a.createElement("span",{className:"token punctuation"},"."),"history",o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n",o.a.createElement("span",{className:"token comment"},"// => State ","{"),"\n",o.a.createElement("span",{className:"token comment"},"//","   ","value: ","{"," fanOn: 'second' ","}",","),"\n",o.a.createElement("span",{className:"token comment"},"//","   ","actions: []"),"\n",o.a.createElement("span",{className:"token comment"},"// ","}"),"\n","\n",o.a.createElement("span",{className:"token keyword"},"const")," fourthState ",o.a.createElement("span",{className:"token operator"},"=")," fanMachine",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"transition"),o.a.createElement("span",{className:"token punctuation"},"("),"thirdState",o.a.createElement("span",{className:"token punctuation"},",")," ",o.a.createElement("span",{className:"token string"},"'POWER'"),o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n","console",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"log"),o.a.createElement("span",{className:"token punctuation"},"("),"fourthState",o.a.createElement("span",{className:"token punctuation"},"."),"value",o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n",o.a.createElement("span",{className:"token comment"},"// transitions to 'fanOn.second' from history"),"\n",o.a.createElement("span",{className:"token comment"},"// => ","{"),"\n",o.a.createElement("span",{className:"token comment"},"//","   ","fanOn: 'second'"),"\n",o.a.createElement("span",{className:"token comment"},"// ","}")))),o.a.createElement(m.MDXTag,{name:"p",components:a},"With a ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"target")," specified, if no history exists for the state region the history state is defined in, it will go to the ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"target")," state by default:"),o.a.createElement("div",{className:"gatsby-highlight","data-language":"js"},o.a.createElement("pre",{className:"language-js"},o.a.createElement("code",{className:"language-js"},o.a.createElement("span",{className:"token keyword"},"const")," firstState ",o.a.createElement("span",{className:"token operator"},"=")," fanMachine",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"transition"),o.a.createElement("span",{className:"token punctuation"},"("),"fanMachine",o.a.createElement("span",{className:"token punctuation"},"."),"initialState",o.a.createElement("span",{className:"token punctuation"},",")," ",o.a.createElement("span",{className:"token string"},"'HIGH_POWER'"),o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n","console",o.a.createElement("span",{className:"token punctuation"},"."),o.a.createElement("span",{className:"token function"},"log"),o.a.createElement("span",{className:"token punctuation"},"("),"firstState",o.a.createElement("span",{className:"token punctuation"},"."),"value",o.a.createElement("span",{className:"token punctuation"},")"),o.a.createElement("span",{className:"token punctuation"},";"),"\n",o.a.createElement("span",{className:"token comment"},"// transitions to the target state of 'fanOn.third' since there is no history"),"\n",o.a.createElement("span",{className:"token comment"},"// => ","{"),"\n",o.a.createElement("span",{className:"token comment"},"//","   ","fanOn: 'third'"),"\n",o.a.createElement("span",{className:"token comment"},"// ","}")))),o.a.createElement(m.MDXTag,{name:"p",components:a},o.a.createElement(m.MDXTag,{name:"strong",components:a,parentName:"p"},"Notes:")),o.a.createElement(m.MDXTag,{name:"ul",components:a},o.a.createElement(m.MDXTag,{name:"li",components:a,parentName:"ul"},"History states can be directly accessed from ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"State")," instances on ",o.a.createElement(m.MDXTag,{name:"inlineCode",components:a,parentName:"li"},"state.history"),", but this is seldom necessary.")))};var p={}}}]);
//# sourceMappingURL=component---src-pages-guides-history-mdx-92450eb71fed9d947ead.js.map